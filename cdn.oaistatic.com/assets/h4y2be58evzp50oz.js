const __vite__mapDeps = (i, m = __vite__mapDeps, d = (m.f || (m.f = ["assets/o8933inmuoavhquq.js", "assets/egb2c0f6p1ew61vt.js", "assets/fyeo2h7okrqcf3nz.js", "assets/root-dql6y2cb.css", "assets/f7j18j5u52u1pnnk.js", "assets/conversation-small-k592qa8k.css", "assets/cbrjkkbokuo79ldz.js", "assets/lk4s8c9e8k6949av.js", "assets/euyyz74sa52ztdnb.js", "assets/dmkzymc2gz73phq3.js", "assets/cof7kd1m2fzgw8jn.js", "assets/iryg4exuv7fzgz7j.js", "assets/j7q6t8ni855ijazk.js", "assets/o8rdwx1o9vb0sv4h.js", "assets/n0kwaugzg5mjzz0f.js", "assets/lqc3mxovgoy4h7eq.js", "assets/ixsisjuxwij5x7d3.js", "assets/mzdwbfzlwdoj9187.js", "assets/mtx41j31lzyyzsit.js", "assets/jrm7m26zzbmpv5fw.js", "assets/f2cokc4vvw85wf3h.js", "assets/odn3jimzeso6ws9q.js", "assets/g286r35f18ua9byd.js", "assets/d4jdlw593wnf688x.js", "assets/ovtejqbx9cqf6kqz.js", "assets/euq7ybw4dhrsufo2.js", "assets/np575ojwia1bc8yj.js"]))) => i.map(i => d[i]);
import {
	b7 as ps,
	q as V,
	bE as ye,
	t as fs,
	J as Qe,
	bz as xs,
	f0 as Ss,
	hr as Wt,
	w as Se,
	P as oe,
	b9 as ys,
	H as ae,
	cZ as it,
	c_ as lt,
	f3 as ct,
	aS as Q,
	ck as dt,
	cE as Cs,
	aQ as Lt,
	ee as ut,
	ec as Gt,
	cn as ws,
	j as mt,
	cy as bs,
	cz as vs,
	d4 as Ce,
	A as Ms,
	a$ as Xe,
	kK as _s,
	T as Ht,
	bp as Ns,
	hk as Ts,
	cN as Ft,
	B as Ut,
	f as B,
	R as Oe,
	l as zt,
	l6 as js,
	x as ee,
	lI as ht,
	aR as Ee,
	O as Bt,
	ax as Vt,
	bm as Yt,
	b2 as fe,
	b3 as xe,
	kX as As,
	s as Ct,
	N as wt,
	iw as ks,
	bh as Es,
	ek as U,
	gb as ke,
	fT as bt,
	hO as Ps,
	hN as vt,
	gi as Os,
	gh as Rs,
	gg as Is,
	aw as Ds,
	eg as Ws,
	eo as Ls,
	jv as Gs,
	g$ as Hs,
	gO as Fs,
	ep as Mt,
	lJ as Us,
	h1 as zs,
	h0 as Bs,
	cI as gt,
	b as Vs,
	cK as Ys,
	b5 as pt,
	o as ot,
	hL as qs,
	hK as Qs,
	cl as ft,
	cs as $s,
	hR as Xs,
	a1 as Ks,
	cm as Js,
	D as _t,
	lK as Zs,
	hg as ea,
	cg as ta,
	ch as sa,
	cv as aa,
	ft as oa,
	aZ as na,
	i5 as ra,
	ed as ia,
	em as Nt,
	fd as la,
	cY as qt,
	hj as ca,
	jk as da,
	fa as ua,
	lL as ma,
	iK as ha,
	be as ga,
	ka as pa
} from "./egb2c0f6p1ew61vt.js";
import {
	e as Ie,
	r as o,
	j as t,
	L as nt,
	M as de,
	p as xt,
	d as fa,
	n as $e,
	f as xa,
	c as De,
	v as Sa,
	R as Qt,
	u as $t
} from "./fyeo2h7okrqcf3nz.js";
import {
	mw as Xt,
	bf as St,
	mx as ya,
	my as Kt,
	eB as Tt,
	mz as Ca,
	bk as jt,
	hp as wa,
	mA as ba,
	ct as Jt,
	gX as va,
	i6 as Ma,
	j2 as Ke,
	z as yt,
	dy as _a,
	mB as Na,
	mC as Ta,
	U as Re,
	mD as Pe,
	aU as At,
	ix as ja,
	mE as Aa,
	eU as Zt,
	mF as ka,
	mG as Ea,
	m3 as Pa,
	mH as Oa,
	kr as Ra,
	kp as Ia,
	mI as Da,
	lz as Wa,
	kb as La,
	fp as Ga,
	mJ as Ha,
	mK as Fa,
	mL as Ua,
	bm as za,
	e as es,
	fg as Ba,
	eQ as Va,
	aT as Ya,
	mM as M,
	L as D,
	mN as qa,
	mO as kt,
	d as Qa,
	mP as Et,
	ez as $a,
	mQ as Xa,
	e0 as Ka,
	u as Ja,
	mR as ts,
	mS as Za,
	em as ss,
	mj as eo,
	mk as to,
	gP as so,
	cs as ao,
	mp as oo,
	mm as no,
	mn as Pt,
	mT as ro,
	mU as io,
	ml as lo,
	eW as co,
	dm as uo,
	jj as mo,
	mV as Ot,
	mW as ho,
	mX as go,
	mY as po,
	eK as fo,
	mZ as as,
	m2 as xo,
	mb as So,
	m_ as yo,
	m$ as Co,
	n0 as wo,
	n1 as bo,
	n2 as vo,
	n3 as Mo,
	n4 as _o,
	n5 as No,
	h$ as To,
	a_ as jo,
	n6 as Ao,
	n7 as ko,
	n8 as Eo,
	n9 as Po,
	na as Oo,
	nb as Ro,
	nc as Io,
	nd as Do,
	ne as Wo,
	nf as Lo,
	ng as Go,
	nh as Ho,
	ni as Fo,
	nj as Uo
} from "./f7j18j5u52u1pnnk.js";
import {
	P as zo,
	u as Bo
} from "./ixsisjuxwij5x7d3.js";
import {
	d as Je,
	C as os,
	e as Vo
} from "./lqc3mxovgoy4h7eq.js";
import {
	C as Yo,
	N as qo,
	j as Qo
} from "./n0kwaugzg5mjzz0f.js";
import {
	b as $o
} from "./mtx41j31lzyyzsit.js";
import {
	M as Xo,
	g as Ko,
	F as Jo,
	T as Zo
} from "./mzdwbfzlwdoj9187.js";
import {
	S as en,
	T as tn
} from "./lyuduqdpgl2iyg0z.js";
import {
	u as ns,
	T as rt,
	g as sn
} from "./cbrjkkbokuo79ldz.js";
import {
	g as an,
	a as on,
	b as nn,
	c as rn,
	V as ln
} from "./f9rv07xfg1rgyv7i.js";
import "./bomum2mkkc55wkmd.js";
const Rt = ps.button`max-w-28 xs:max-w-40 sm:max-w-60 md:max-w-none group flex cursor-pointer items-center gap-1 rounded-lg py-1.5 ${({$shimmer:s})=>s?"loading-shimmer":""} px-1 text-lg hover:bg-token-main-surface-secondary radix-state-open:bg-token-main-surface-secondary font-semibold text-token-text-secondary overflow-hidden whitespace-nowrap`;

function cn({
	conversation: s,
	gizmoResource: e,
	elementRef: i
}) {
	const a = ye(s.id, l => l?.title ?? null) ?? s.title;
	return t.jsx(nt, {
		to: va(s.id, e),
		children: t.jsx(Se.Item, {
			onSelect: () => {
				oe.logEventWithStatsig("Projects: Breadcrumb Picker Pick Conversation", "chatgpt_web_projects_breadcrumb_picker_pick_conversation")
			},
			icon: Ma,
			children: t.jsx("div", {
				ref: i,
				children: a
			})
		}, s.id)
	})
}

function dn({
	gizmoId: s,
	clientThreadId: e,
	inMobileHeader: i,
	modelLabel: n
}) {
	const a = V(),
		l = Ie(),
		y = Xt(),
		c = ns(e, y, void 0, void 0, void 0),
		{
			data: p
		} = St(s),
		{
			items: N,
			hasNextPage: h,
			fetchNextPage: d,
			isLoading: x,
			isFetchingNextPage: f
		} = ya(s),
		m = o.useRef(null),
		v = o.useCallback(w => {
			x || w == null || (m.current?.disconnect(), m.current = new IntersectionObserver(T => {
				T[0].isIntersecting && h && d()
			}), m.current.observe(w))
		}, [x, h, d]);
	o.useEffect(() => () => {
		m.current?.disconnect()
	}, []);
	const [C, g, u] = ye(e, w => [w?.isLoading, w?.title ?? null, ae.getThreadTitleSource(w)]), S = fs(a).checkGate("1733239976"), {
		showEmptyState: A
	} = Kt(e), _ = l.formatMessage(Tt.newChatTitle), j = Ca(e);
	if (!p || A) return null;
	const P = g == null && (Qe(e) || u === xs.NewChat),
		W = C ? t.jsx(t.Fragment, {}) : t.jsxs(Rt, {
			$shimmer: P,
			children: [t.jsxs("div", {
				className: "truncate",
				children: [j ? t.jsx(ba, {
					text: g ?? ""
				}) : g ?? _, t.jsx("span", {
					className: "bg-token-main-surface-secondary text-token-text-secondary relative bottom-[1px] mx-1 inline-block rounded-md px-1 text-xs leading-4",
					children: n
				})]
			}), t.jsx(Jt, {
				className: "icon-sm text-token-text-tertiary"
			})]
		}),
		L = p.gizmo.display.name;
	return t.jsxs("div", {
		className: "flex items-center gap-0 overflow-hidden px-2 py-1.5 whitespace-nowrap",
		children: [t.jsx(Rt, {
			children: t.jsx(nt, {
				className: "truncate",
				to: jt(a, p),
				children: L
			})
		}), t.jsxs(t.Fragment, {
			children: [t.jsx(Ss, {
				className: "icon-sm text-token-text-tertiary"
			}), t.jsxs(Wt, {
				contentAlign: i ? "center" : "start",
				size: "small",
				onOpenChange: w => {
					w && oe.logEventWithStatsig("Projects: Breadcrumb Picker Open", "chatgpt_web_projects_breadcrumb_picker_open")
				},
				triggerButton: W,
				contentClassName: "max-h-[50dvh] overflow-y-scroll",
				children: [!S && t.jsxs(Se.Sub, {
					onOpenChange: w => {
						w && oe.logEventWithStatsig("Projects: Breadcrumb Picker Model Picker Open", "chatgpt_web_projects_breadcrumb_picker_model_picker_open")
					},
					children: [t.jsx(Se.SubMenuTrigger, {
						children: t.jsxs("div", {
							className: "flex w-full items-center justify-between gap-1",
							children: [t.jsx(de, {
								id: "ilkdMh",
								defaultMessage: "Model"
							}), t.jsx("span", {
								className: "text-token-text-secondary text-xs font-medium",
								children: n
							})]
						})
					}), t.jsx(Se.Portal, {
						children: t.jsx(Se.SubContent, {
							onClick: () => {
								oe.logEventWithStatsig("Projects: Breadcrumb Picker Model Picker Select", "chatgpt_web_projects_breadcrumb_picker_model_picker_select")
							},
							children: t.jsx(rt, {
								sections: c
							})
						})
					})]
				}), S && t.jsx(rt, {
					sections: c
				}), !S && t.jsxs(t.Fragment, {
					children: [t.jsx(nt, {
						to: jt(a, p),
						children: t.jsx(Se.Item, {
							onSelect: () => {
								oe.logEventWithStatsig("Projects: Breadcrumb Picker Pick New Chat", "chatgpt_web_projects_breadcrumb_picker_pick_new_chat")
							},
							icon: wa,
							children: t.jsx(de, {
								...Tt.newChatProjectDropdownItem,
								values: {
									name: `"${p.gizmo.display.name}"`
								}
							})
						}, "new-chat")
					}), N.filter(w => w.id !== e).map((w, T) => {
						const r = h && T === N.length - 4 ? v : void 0;
						return t.jsx(cn, {
							elementRef: r,
							conversation: w,
							gizmoResource: p
						}, w.id)
					}), f && t.jsx("div", {
						className: "m-4 mb-5 flex justify-center",
						children: t.jsx(ys, {})
					})]
				})]
			})]
		})]
	})
}
const un = it(() => lt(() => import("./o8933inmuoavhquq.js"), __vite__mapDeps([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])).then(s => s.ThreadHeaderGizmoDropdown)),
	mn = ({
		clientThreadId: s,
		shouldShowFinchSection: e,
		preferredModelId: i
	}) => {
		const n = Xt(),
			a = ns(s, n, e, void 0, i);
		return t.jsx(rt, {
			sections: a
		})
	};

function hn({
	clientThreadId: s,
	inMobileHeader: e,
	preferredModelId: i
}) {
	const n = V(),
		{
			isLoading: a,
			data: l
		} = dt();
	Lt.useStoreWithInit({});
	const y = ut(),
		c = Gt(y),
		p = ws(),
		[N] = xt(),
		h = mt(),
		d = yt(T => T.shouldShowThreadModelPickerDot),
		x = h?.planType,
		f = _a(),
		{
			data: m
		} = bs(),
		v = m && vs(m),
		C = ye(s, T => rn({
			ctx: n,
			clientThreadId: s,
			threadState: T,
			searchParams: N,
			planType: x,
			isModelSticky: !!f,
			hasPlusFeatures: v
		})),
		g = Ie(),
		u = an(C, l, g),
		S = on(C, l),
		{
			isUnauthenticated: A
		} = Ce(),
		_ = !A && x !== Ms.FREE || v,
		j = o.useMemo(() => !Xe(n) || !Na(n, h, p, l) ? !1 : (Ta() && !d && Re.setThreadModelPickerAlertDot(!0), !0), [n, h, l, p, d]);
	if (c) return t.jsx("div", {
		className: "text-token-text-primary px-3 text-lg",
		children: Pe
	});
	_ && (At.markStart("ThreadModelSelector"), u != null && At.markRendered("ThreadModelSelector"));
	const P = S === _s.TITLE ? t.jsx(t.Fragment, {
			children: u
		}) : t.jsxs(t.Fragment, {
			children: [Pe, " ", t.jsx("span", {
				className: "text-token-text-tertiary",
				children: u
			})]
		}),
		W = t.jsx("div", {
			children: _ ? P : Pe
		}),
		L = nn(C, l),
		w = t.jsxs(ja, {
			style: {
				viewTransitionName: "var(--vt-thread-model-switcher)"
			},
			"aria-label": u ? g.formatMessage({
				id: "JrtGPQ",
				defaultMessage: "Model selector, current model is {modelLabel}"
			}, {
				modelLabel: u
			}) : "",
			children: [L ? t.jsx(Ht, {
				label: C?.split(":").slice(-1)[0],
				side: "right",
				children: W
			}) : W, t.jsx(Jt, {
				className: "icon-sm text-token-text-tertiary"
			}), d && t.jsx(Aa, {
				color: "blue",
				className: "ms-1"
			})]
		});
	return a ? w : t.jsx(Wt, {
		alignOffset: -4,
		size: "small",
		triggerButton: w,
		onOpenChange: T => {
			oe.logEvent("Toggle Model Switcher", {
				isOpen: T
			}), Ns.logEvent("toggle_model_switcher", null, {
				isOpen: String(T)
			})
		},
		contentAlign: e ? "center" : "start",
		testId: "model-switcher-dropdown",
		children: t.jsx(mn, {
			clientThreadId: s,
			shouldShowFinchSection: j,
			preferredModelId: i
		})
	})
}

function It({
	clientThreadId: s,
	inMobileHeader: e = !1
}) {
	const i = ct(s),
		n = V(),
		a = Ke(i),
		l = Q(n, "3786438384"),
		{
			showEmptyState: y
		} = Kt(s),
		{
			data: c
		} = St(i),
		{
			data: p
		} = dt(),
		N = Cs(s),
		h = Q(n, "1213809372"),
		d = Q(n, "1854238036"),
		x = h || d,
		[f, m] = o.useState(!1);
	o.useEffect(() => {
		if (!d || c?.gizmo.default_model == null || p?.models.get(c?.gizmo.default_model) == null) return;
		const g = setTimeout(() => {
			m(!0)
		}, 500);
		return () => clearTimeout(g)
	}, [d, c?.gizmo.default_model, p]);
	const {
		modelLabel: v
	} = sn(N.id, p), C = t.jsx(hn, {
		clientThreadId: s,
		inMobileHeader: e,
		preferredModelId: c?.gizmo.default_model ?? void 0
	});
	return i == null || a && l ? C : a ? y && c ? C : t.jsx(dn, {
		modelLabel: v ?? "",
		gizmoId: i,
		clientThreadId: s,
		inMobileHeader: e
	}) : t.jsxs(t.Fragment, {
		children: [t.jsx(un, {
			clientThreadId: s,
			gizmoId: i,
			inMobileHeader: e,
			showGizmoModelPicker: x
		}), f && d && c?.gizmo.default_model != null && c.gizmo.default_model !== N.id && t.jsx("div", {
			className: "text-token-text-tertiary ms-3 hidden max-w-md text-xs break-words md:block",
			children: t.jsx(de, {
				id: "+eWXA4",
				defaultMessage: "Note: The creator recommends {modelTitle}. You are using {currentModelTitle}.",
				values: {
					modelTitle: p?.models.get(c.gizmo.default_model)?.title,
					currentModelTitle: N.title
				}
			})
		})]
	})
}
const rs = {
		spreadsheets: Wa,
		presentations: Da,
		actions: Ia,
		deep_research: Ra,
		suggested: Oa
	},
	gn = {
		spreadsheets: "Spreadsheets",
		presentations: "Presentations",
		actions: "Actions",
		deep_research: "Reports",
		suggested: "Suggested"
	};

function pn({
	clientThreadId: s
}) {
	const {
		isOdysseyMode: e
	} = Zt(s), i = yn(), {
		keywords: n
	} = ka({
		clientThreadId: s
	});
	return !e || !i ? null : t.jsx(fn, {
		groups: i,
		mentionKeywords: n
	})
}

function fn({
	groups: s,
	mentionKeywords: e
}) {
	const [i, n] = o.useState(null), a = Je(), [l, y] = o.useState(null), [c, p] = o.useState("suggested"), N = g => {
		p(g), y(null)
	}, h = o.useMemo(() => Array.from(new Set(s.map(g => g.category.name))), [s]), d = o.useMemo(() => s.find(u => u.category.name === c)?.prompts ?? [], [s, c]);
	o.useEffect(() => {
		d && l != null && a.setText(d[l].prompt_string)
	}, [a, d, l]), o.useEffect(() => {
		e && e.length > 0 && a.resetTrackingKeywords(e)
	}, [a, e]);
	const [x, f] = o.useState(() => a.isEmpty());
	o.useEffect(() => Ts(() => {
		a.isEmpty$() && f(!0)
	}), [a]), o.useEffect(() => a.subscribe("keydown", g => {
		if (!(g.isComposing || !x || d.length === 0)) switch (g.key) {
			case "ArrowDown": {
				const u = l == null ? 0 : Math.min(l + 1, d.length - 1);
				y(u);
				break
			}
			case "ArrowUp": {
				const u = l === 0 || l == null ? null : l - 1;
				y(u);
				break
			}
			default: {
				f(!1), y(null);
				break
			}
		}
	}), [a, l, x, d]), o.useEffect(() => a.subscribe("click", () => {
		f(!1), y(null)
	}), [a]);
	const m = o.useRef(null),
		[v, C] = o.useState(void 0);
	return Ft(() => {
		m.current && C(m.current.offsetWidth)
	}, [c]), t.jsx(Ea, {
		horizontalPadding: "standard",
		horizontalMargin: "none",
		verticalMargin: "none",
		verticalPadding: "none",
		overflowY: "auto",
		children: t.jsx(Pa, {
			className: "h-full overflow-y-hidden",
			children: t.jsx($e.div, {
				className: "flex size-full flex-col",
				initial: {
					opacity: 0
				},
				animate: {
					opacity: 1
				},
				exit: {
					opacity: 0
				},
				children: t.jsxs("div", {
					className: "mt-5 flex flex-col items-center overflow-y-auto",
					children: [t.jsx("div", {
						className: "py-2",
						ref: m,
						children: t.jsx("div", {
							className: "flex flex-row flex-nowrap gap-2 overflow-x-auto",
							children: h.map(g => t.jsx(xn, {
								category: g,
								selected: c === g,
								onSelect: () => N(g)
							}, g))
						})
					}), t.jsx("div", {
						className: "overflow-y-auto",
						children: t.jsx($e.ul, {
							className: "mt-1 flex flex-col",
							style: v ? {
								width: v
							} : {},
							children: d.map((g, u) => t.jsx(Sn, {
								prompt: g,
								rowIdx: u,
								selected: l === u,
								onSelect: () => {
									y(u), a.focus()
								},
								hoveredPromptIndex: i,
								setHoveredPromptIndex: n,
								totalRows: d.length
							}, `${c}-${u}`))
						})
					})]
				})
			})
		})
	})
}

function xn({
	category: s,
	selected: e,
	onSelect: i
}) {
	const n = rs[s],
		a = e ? "text-token-text-primary" : "text-token-text-secondary",
		l = e ? "text-token-icon-primary" : "text-token-icon-secondary";
	return t.jsx(Ut, {
		color: "secondary",
		onClick: i,
		icon: () => t.jsx(n, {
			className: l
		}),
		className: B("border-token-bg-tertiary", e && "bg-token-bg-tertiary", "font-normal", a),
		children: gn[s]
	})
}

function Sn({
	prompt: s,
	rowIdx: e,
	selected: i,
	onSelect: n,
	hoveredPromptIndex: a,
	setHoveredPromptIndex: l,
	totalRows: y
}) {
	const c = o.useRef(null);
	o.useEffect(() => {
		i && c.current?.scrollIntoView({
			behavior: "auto"
		})
	}, [i]);

	function p() {
		const h = Cn(s),
			d = h ? rs[h] : Ga;
		return t.jsx(d, {
			className: "text-token-icon-secondary size-5"
		})
	}
	const N = a === e || a === e + 1;
	return t.jsxs($e.li, {
		ref: c,
		initial: {
			opacity: 0,
			translateY: 4
		},
		animate: {
			opacity: 1,
			translateY: 0
		},
		transition: {
			delay: e * .03
		},
		exit: {
			opacity: 0,
			translateY: 4
		},
		onMouseEnter: () => l(e),
		onMouseLeave: () => l(null),
		children: [t.jsxs("button", {
			className: B("hover:bg-token-bg-tertiary flex w-full flex-row items-center rounded-xl px-2 py-4 text-start"),
			onClick: n,
			type: "button",
			children: [t.jsx("div", {
				className: "flex flex-col items-center justify-center p-1",
				children: p()
			}), t.jsx("div", {
				className: "text-token-text-secondary flex-1 overflow-hidden pe-2 text-sm text-ellipsis whitespace-nowrap",
				children: s.title
			}), s.example_url ? t.jsx(La, {
				className: "text-token-icon-secondary h-6 w-6 shrink-0",
				onClick: h => {
					h.stopPropagation(), s.example_url && (window.location.href = s.example_url)
				}
			}) : null]
		}), e < y - 1 && !N && t.jsx("div", {
			className: "bg-token-bg-tertiary mx-4 mt-[-1px] h-[1px]"
		})]
	})
}

function yn() {
	return fa({
		queryKey: ["odyssey_suggested_prompts_all"],
		queryFn: async () => await Oe.safeGet("/n7jupd_suggested_prompts_all")
	}).data?.prompt_groups
}

function Cn(s) {
	const e = s.categories;
	if (e.length !== 0) return e[0].name
}

function wn(s) {
	"use forget";
	const e = De.c(5),
		{
			clientThreadId: i
		} = s;
	let n;
	e[0] !== s ? (n = t.jsx(Mn, {
		...s
	}), e[0] = s, e[1] = n) : n = e[1];
	let a;
	return e[2] !== i || e[3] !== n ? (a = t.jsx(os, {
		clientThreadId: i,
		children: n
	}), e[2] = i, e[3] = n, e[4] = a) : a = e[4], a
}

function bn(s) {
	"use forget";
	const e = De.c(21),
		{
			clientThreadId: i,
			headlineOption: n,
			currentModelId: a,
			isModelLoaded: l,
			overrideMessage: y
		} = s,
		c = ht(),
		p = za(),
		N = Je(),
		{
			isFocused: h,
			autocompletions: d
		} = Yt(N.store),
		x = h && d.length > 0;
	let f;
	e[0] === Symbol.for("react.memo_cache_sentinel") ? (f = {
		opacity: 0
	}, e[0] = f) : f = e[0];
	const m = x ? 0 : 1;
	let v;
	e[1] !== m ? (v = {
		opacity: m
	}, e[1] = m, e[2] = v) : v = e[2];
	let C, g;
	e[3] === Symbol.for("react.memo_cache_sentinel") ? (C = {
		opacity: 0
	}, g = {
		duration: .1
	}, e[3] = C, e[4] = g) : (C = e[3], g = e[4]);
	const u = p ? "keyboard-open:h-[calc(100%-var(--screen-keyboard-height,0px)-var(--composer-height,100px))] h-full motion-safe:[transition:height_0.3s_var(--easing-common)]" : "h-full",
		S = x ? "pointer-events-none" : "",
		A = c ? "@lg/thread:hidden" : "lg:hidden";
	let _;
	e[5] !== u || e[6] !== S || e[7] !== A ? (_ = B("text-token-text-primary mt-[var(--screen-optical-compact-offset-amount)] [display:var(--display-hidden-until-loaded,flex)] shrink flex-col items-center justify-center overflow-hidden px-4", u, S, A), e[5] = u, e[6] = S, e[7] = A, e[8] = _) : _ = e[8];
	let j;
	e[9] !== n || e[10] !== y ? (j = n === "CHATGPT_LOGO" ? t.jsx(Bt, {
		className: "inline-block h-12 w-12"
	}) : t.jsx(is, {
		headlineOption: n,
		overrideMessage: y
	}), e[9] = n, e[10] = y, e[11] = j) : j = e[11];
	let P;
	e[12] !== i || e[13] !== a || e[14] !== l ? (P = t.jsx(Xo, {
		isModelLoaded: l,
		currentModelId: a,
		clientThreadId: i
	}), e[12] = i, e[13] = a, e[14] = l, e[15] = P) : P = e[15];
	let W;
	return e[16] !== j || e[17] !== P || e[18] !== v || e[19] !== _ ? (W = t.jsxs($e.div, {
		initial: f,
		animate: v,
		exit: C,
		transition: g,
		className: _,
		children: [j, P]
	}), e[16] = j, e[17] = P, e[18] = v, e[19] = _, e[20] = W) : W = e[20], W
}

function vn({
	isQuorum: s,
	activeSystemHintType: e,
	isAnonModeEnabled: i,
	currentModelId: n
}) {
	if (s) return O.chatgptHipaa;
	if (e === Ee.Research) return O.deepResearchPlaceholder;
	const l = Gt(e);
	if (n === "n7jupd" || l) return O.whatCanIDo
}

function Mn(s) {
	"use forget";
	const e = De.c(27),
		{
			clientThreadId: i,
			currentModelId: n,
			isModelLoaded: a
		} = s,
		l = V(),
		y = Je(),
		c = zt();
	let p;
	e[0] !== c ? (p = c?.isQuorum(), e[0] = c, e[1] = p) : p = e[1];
	const N = p,
		{
			isUnauthenticated: h
		} = Ce(),
		d = js();
	Ha(y);
	const x = ee(l, "4031588851"),
		f = ee(l, "3533083032", {
			disableExposureLog: !0
		}),
		m = h ? f : x,
		v = ht(),
		C = m.get("headline_option", "HELP_WITH"),
		g = ut(),
		u = !!N;
	let S;
	e[2] !== g || e[3] !== n || e[4] !== d || e[5] !== u ? (S = vn({
		isQuorum: u,
		activeSystemHintType: g,
		isAnonModeEnabled: d,
		currentModelId: n
	}), e[2] = g, e[3] = n, e[4] = d, e[5] = u, e[6] = S) : S = e[6];
	const A = S,
		_ = v ? "@lg/thread:items-end" : "lg:items-end";
	let j;
	e[7] !== _ ? (j = B("flex items-center justify-center", _), e[7] = _, e[8] = j) : j = e[8];
	const P = v ? "@lg/thread:block" : "lg:block";
	let W;
	e[9] !== P ? (W = B("mb-7 hidden text-center @lg/thread:block", P), e[9] = P, e[10] = W) : W = e[10];
	let L;
	e[11] !== C || e[12] !== A ? (L = C === "CHATGPT_LOGO" ? t.jsx(Bt, {
		className: "inline-block h-12 w-12"
	}) : t.jsx(is, {
		headlineOption: C,
		overrideMessage: A
	}), e[11] = C, e[12] = A, e[13] = L) : L = e[13];
	let w;
	e[14] !== W || e[15] !== L ? (w = t.jsx("div", {
		className: W,
		children: L
	}), e[14] = W, e[15] = L, e[16] = w) : w = e[16];
	let T;
	e[17] !== i || e[18] !== n || e[19] !== C || e[20] !== A || e[21] !== a ? (T = t.jsx(bn, {
		headlineOption: C,
		clientThreadId: i,
		isModelLoaded: a,
		currentModelId: n,
		overrideMessage: A
	}), e[17] = i, e[18] = n, e[19] = C, e[20] = A, e[21] = a, e[22] = T) : T = e[22];
	let r;
	return e[23] !== T || e[24] !== j || e[25] !== w ? (r = t.jsxs("div", {
		className: j,
		children: [w, T]
	}), e[23] = T, e[24] = j, e[25] = w, e[26] = r) : r = e[26], r
}

function _n(s) {
	"use forget";
	const e = De.c(16),
		{
			headlineOption: i,
			overrideMessage: n
		} = s,
		a = function(r) {
			const {
				name: H
			} = r;
			return t.jsx(Ht, {
				label: p.formatMessage(O.editNicknameTooltip),
				delayDuration: 300,
				side: "top",
				children: t.jsx("button", {
					onClick: jn,
					style: {
						textDecoration: "none",
						transition: "color 0.2s"
					},
					onMouseEnter: Tn,
					onMouseLeave: Nn,
					children: H
				})
			})
		};
	let l;
	e[0] === Symbol.for("react.memo_cache_sentinel") ? (l = function() {
		const r = [],
			H = [];
		r.push("READY_WHEN_YOU_ARE", "ON_YOUR_MIND", "WHAT_ARE_YOU_WORKING_ON", "AGENDA_TODAY", "SHOULD_WE_BEGIN"), H.push("GOOD_TO_SEE_YOU", "DIVE_IN", "HOW_CAN_I_HELP", ...r);
		const z = H[Math.floor(Math.random() * H.length)],
			te = `${r[Math.floor(Math.random()*r.length)]} | ${z}`;
		fe.setCookie(xe.headlineMessage, te)
	}, e[0] = l) : l = e[0];
	const y = l,
		c = function() {
			const r = fe.getCookie(xe.GreetingName),
				z = fe.getCookie(xe.headlineMessage)?.split("|"),
				K = z?.[0]?.trim(),
				te = z?.[1]?.trim();
			return {
				cookieName: r,
				isReadyForPersonalized: !!r && r.length <= d,
				headline: K,
				namedHeadline: te
			}
		},
		p = Ie(),
		N = V(),
		h = ee(N, "1704793646"),
		d = h.get("name_char_limit", 20),
		[x, f] = o.useState(c),
		{
			isUnauthenticated: m
		} = Ce(),
		v = es(),
		g = Ba(!m && !!v)?.data,
		u = Va(),
		S = h.get("greeting_web", !1),
		A = h.get("full_name_llm", !1);
	let _, j;
	e[1] !== v || e[2] !== A || e[3] !== u || e[4] !== S || e[5] !== g ? (_ = () => {
		if (S && u) {
			if (v && g) {
				const T = As(g, v, A);
				fe.setCookie(xe.GreetingName, T), Ct.count(wt.MOONSHINE, "splashScreenV2.greeting_cookie_name_set_web")
			}
			y()
		} else fe.deleteCookie(xe.GreetingName), fe.deleteCookie(xe.headlineMessage)
	}, j = [g, v, S, A, u], e[1] = v, e[2] = A, e[3] = u, e[4] = S, e[5] = g, e[6] = _, e[7] = j) : (_ = e[6], j = e[7]), o.useEffect(_, j);
	let P;
	e[8] !== c || e[9] !== u || e[10] !== S ? (P = () => {
		const T = () => {
			if (S && u) {
				const {
					cookieName: r,
					isReadyForPersonalized: H
				} = c();
				f(z => ({
					...z,
					cookieName: r,
					isReadyForPersonalized: H
				}))
			}
		};
		return window.addEventListener("refreshGreeting", T), () => window.removeEventListener("refreshGreeting", T)
	}, e[8] = c, e[9] = u, e[10] = S, e[11] = P) : P = e[11], o.useEffect(P);
	let W, L;
	e[12] !== u || e[13] !== S ? (W = () => {
		S && u && Ct.count(wt.MOONSHINE, "splashScreenV2.greeting_shown_web")
	}, L = [S, u], e[12] = u, e[13] = S, e[14] = W, e[15] = L) : (W = e[14], L = e[15]), o.useEffect(W, L);
	let w;
	return n ? w = t.jsx(t.Fragment, {
		children: t.jsx(de, {
			...n,
			values: {
				hipaa: t.jsx("span", {
					className: "text-token-interactive-label-accent-default",
					children: p.formatMessage(O.hipaa)
				})
			}
		})
	}) : x.isReadyForPersonalized && S ? w = t.jsx(t.Fragment, {
		children: t.jsx(de, {
			...st[x.namedHeadline ?? i].withName,
			values: {
				name: t.jsx(a, {
					name: x.cookieName ?? ""
				}, "name")
			}
		})
	}) : S && x.headline ? w = p.formatMessage(st[x.headline].original) : w = p.formatMessage(st[i].original), w
}

function Nn(s) {
	s.currentTarget.className = "text-inherit"
}

function Tn(s) {
	s.currentTarget.className = "text-token-text-secondary"
}

function jn() {
	Re.setAutoHighlightNicknameInput(!0), Re.openModal(Ya.UserContext)
}

function is(s) {
	"use forget";
	const e = De.c(25),
		{
			headlineOption: i,
			overrideMessage: n
		} = s,
		a = Vt(),
		l = o.useRef(null);
	let y;
	e[0] !== a ? (y = {
		isTempChatVisible: a,
		titleTranslate: 0
	}, e[0] = a, e[1] = y) : y = e[1];
	const [c, p] = o.useState(y);
	let N, h;
	e[2] !== a ? (N = () => {
		p({
			isTempChatVisible: a,
			titleTranslate: a ? -((l.current?.offsetHeight ?? 0) - 40) : 0
		})
	}, h = [a], e[2] = a, e[3] = N, e[4] = h) : (N = e[3], h = e[4]), Ft(N, h);
	const d = Ie(),
		x = V();
	let f;
	e[5] !== x ? (f = !Xe(x) && (Fa(ks()) || ee(x, "2118136551").get("show_chatgpt_h1", !1)), e[5] = x, e[6] = f) : f = e[6];
	const m = f;
	let v;
	e[7] === Symbol.for("react.memo_cache_sentinel") ? (v = {
		viewTransitionName: "var(--vt-splash-screen-headline)"
	}, e[7] = v) : v = e[7];
	let C;
	e[8] !== i || e[9] !== d || e[10] !== m || e[11] !== a || e[12] !== n || e[13] !== c.isTempChatVisible || e[14] !== c.titleTranslate ? (C = m ? t.jsx("h1", {
		className: "mb-4",
		children: d.formatMessage(O.chatgpt)
	}) : t.jsx("h1", {
		className: B("text-page-header inline-flex min-h-10.5 items-baseline whitespace-pre-wrap motion-safe:[transition:0.25s_transform_var(--spring-standard),0.2s_opacity_var(--spring-standard),0.3s_visibility_var(--spring-standard)]", c.isTempChatVisible ? "invisible opacity-0" : "opacity-100"),
		"aria-hidden": a,
		style: {
			transform: `translateY(${c.titleTranslate}px)`
		},
		children: t.jsx("div", {
			className: "px-1 text-pretty whitespace-pre-wrap",
			children: t.jsx(_n, {
				headlineOption: i,
				overrideMessage: n
			})
		})
	}), e[8] = i, e[9] = d, e[10] = m, e[11] = a, e[12] = n, e[13] = c.isTempChatVisible, e[14] = c.titleTranslate, e[15] = C) : C = e[15];
	const g = c.isTempChatVisible ? "translate-y-0 opacity-100" : "invisible translate-y-10 opacity-0";
	let u;
	e[16] !== g ? (u = B("absolute bottom-0 motion-safe:[transition:0.25s_transform_var(--spring-standard),0.2s_opacity_var(--spring-standard),0.3s_visibility_var(--spring-standard)]", g), e[16] = g, e[17] = u) : u = e[17];
	const S = !a;
	let A;
	e[18] === Symbol.for("react.memo_cache_sentinel") ? (A = t.jsx(Ua, {}), e[18] = A) : A = e[18];
	let _;
	e[19] !== u || e[20] !== S ? (_ = t.jsx("div", {
		className: u,
		"aria-hidden": S,
		ref: l,
		children: A
	}), e[19] = u, e[20] = S, e[21] = _) : _ = e[21];
	let j;
	return e[22] !== _ || e[23] !== C ? (j = t.jsx("div", {
		className: "relative inline-flex justify-center text-center text-2xl leading-9 font-semibold",
		children: t.jsx("div", {
			children: t.jsxs("div", {
				className: "grid-cols-1 items-center justify-end",
				style: v,
				children: [C, _]
			})
		})
	}), e[22] = _, e[23] = C, e[24] = j) : j = e[24], j
}
const O = xa({
		chatgptHipaa: {
			id: "SplashScreenV2.chatgptHipaa",
			defaultMessage: "ChatGPT {hipaa}"
		},
		hipaa: {
			id: "common.hipaa",
			defaultMessage: "HIPAA"
		},
		whatCanIHelpWith: {
			id: "SplashScreenV2.whatCanIHelpWith",
			defaultMessage: "What can I help with?"
		},
		whatCanIHelpWithWithName: {
			id: "SplashScreenV2.whatCanIHelpWith.withName",
			defaultMessage: "What can I help with, {name}?"
		},
		whereShouldWeStart: {
			id: "SplashScreenV2.whereShouldWeStart",
			defaultMessage: "Where should we start?"
		},
		whereShouldWeStartWithName: {
			id: "SplashScreenV2.whereShouldWeStart.withName",
			defaultMessage: "Where should we start, {name}?"
		},
		askChatgptAnything: {
			id: "SplashScreenV2.askChatgptAnything",
			defaultMessage: "Ask ChatGPT anything"
		},
		askChatgptAnythingWithName: {
			id: "SplashScreenV2.askChatgptAnything.withName",
			defaultMessage: "Ask ChatGPT anything, {name}"
		},
		shouldWeBegin: {
			id: "SplashScreenV2.shouldWeBegin",
			defaultMessage: "Where should we begin?"
		},
		goodToSeeYouWithName: {
			id: "SplashScreenV2.goodToSeeYou.withName",
			defaultMessage: "Good to see you, {name}."
		},
		diveInWithName: {
			id: "SplashScreenV2.diveInWithName",
			defaultMessage: "Hey, {name}. Ready to dive in?"
		},
		readyWhenYouAre: {
			id: "SplashScreenV2.readyWhenYouAre",
			defaultMessage: "Ready when you are."
		},
		onYourMind: {
			id: "SplashScreenV2.onYourMind",
			defaultMessage: "What's on your mind today?"
		},
		whatAreYouWorkingOn: {
			id: "SplashScreenV2.whatAreYouWorkingOn",
			defaultMessage: "What are you working on?"
		},
		agendaToday: {
			id: "SplashScreenV2.agendaToday",
			defaultMessage: "What's on the agenda today?"
		},
		deepResearchPlaceholder: {
			id: "G1v9do",
			defaultMessage: "What are you researching?"
		},
		editNicknameTooltip: {
			id: "SplashScreenV2.editNicknameTooltip",
			defaultMessage: "Edit nickname"
		},
		howCanIHelp: {
			id: "SplashScreenV2.howCanIHelp",
			defaultMessage: "How can I help?"
		},
		howCanIHelpWithName: {
			id: "SplashScreenV2.howCanIHelp.withName",
			defaultMessage: "How can I help, {name}?"
		},
		chatgpt: {
			id: "SplashScreenV2.chatgpt",
			defaultMessage: "ChatGPT"
		},
		whatCanIDo: {
			id: "SplashScreenV2.whatCanIDo",
			defaultMessage: "What can I do for you?"
		}
	}),
	st = {
		HELP_WITH: {
			original: O.whatCanIHelpWith,
			withName: O.whatCanIHelpWithWithName
		},
		WHERE_TO_START: {
			original: O.whereShouldWeStart,
			withName: O.whereShouldWeStartWithName
		},
		ASK_CHATGPT: {
			original: O.askChatgptAnything,
			withName: O.askChatgptAnythingWithName
		},
		HOW_CAN_I_HELP: {
			original: O.howCanIHelp,
			withName: O.howCanIHelpWithName
		},
		GOOD_TO_SEE_YOU: {
			original: O.goodToSeeYouWithName,
			withName: O.goodToSeeYouWithName
		},
		DIVE_IN: {
			original: O.diveInWithName,
			withName: O.diveInWithName
		},
		READY_WHEN_YOU_ARE: {
			original: O.readyWhenYouAre,
			withName: O.readyWhenYouAre
		},
		ON_YOUR_MIND: {
			original: O.onYourMind,
			withName: O.onYourMind
		},
		WHAT_ARE_YOU_WORKING_ON: {
			original: O.whatAreYouWorkingOn,
			withName: O.whatAreYouWorkingOn
		},
		AGENDA_TODAY: {
			original: O.agendaToday,
			withName: O.agendaToday
		},
		SHOULD_WE_BEGIN: {
			original: O.shouldWeBegin,
			withName: O.shouldWeBegin
		},
		WHAT_CAN_I_DO: {
			original: O.whatCanIDo,
			withName: O.whatCanIDo
		}
	},
	ls = 4,
	An = 7,
	kn = 5,
	En = 10 * 60 * 1e3,
	Pn = async ({
		text: s,
		numCompletions: e,
		isUnauthenticated: i,
		isThreadUsingSearchMode: n = !1,
		autocompleteMode: a,
		activeSystemHintType: l
	}) => {
		try {
			return (i ? await Oe.safePost("/conversation/experimental/generate_autocompletions_anon", {
				requestBody: {
					input_text: s,
					num_completions: e,
					in_search_mode: n,
					system_hint: l ?? void 0
				},
				authOption: ot.Anonymous
			}) : await Oe.safePost("/conversation/experimental/generate_autocompletions", {
				requestBody: {
					input_text: s,
					num_completions: e,
					in_search_mode: n,
					system_hint: l ?? void 0
				}
			})).completions.map(c => ({
				id: Sa(),
				type: D.Autocomplete,
				title: c.slice(0, s.length),
				body: c.slice(s.length),
				oneliner: c,
				prompt: c,
				source: a
			}))
		} catch {
			return []
		}
	}, cs = s => ee(s, Xe(s) ? "4093727931" : "312855442"), On = ({
		clientThreadId: s,
		composerController: e,
		isGizmoThread: i,
		isNewThread: n,
		isProjectThread: a
	}) => {
		const [l, y] = xt(), c = l.get("forceShowNuxCASuggestion") === "true", p = V(), N = Yt(e.store, k => k.showTaggingDropdown), h = ut(), [d, x] = o.useState([]), f = ls, m = o.useCallback(k => {
			x(b => {
				const R = typeof k == "function" ? k(b) : k;
				return Es(R, b) ? b : R
			})
		}, []), v = h === Ee.Search, {
			bingTrendingSuggestions: C,
			chatgptTrendingSuggestions: g,
			fetchBingTrendingSuggestions: u,
			fetchChatgptTrendingSuggestions: S
		} = Rn(), A = o.useRef({
			bing: 0,
			chatgpt: 0
		}), _ = o.useRef(!1), [j, P] = o.useState(!1);
		o.useEffect(() => e.subscribe("click", () => P(!0)), [e]);
		const {
			isUnauthenticated: W
		} = Ce(), L = o.useCallback(k => {
			const b = e.getCurrentText();
			return b && at(k).startsWith(b.toLocaleLowerCase())
		}, [e]), w = o.useCallback(k => {
			const b = e.getCurrentText(),
				R = k.title + k.body;
			return L(k) ? {
				...k,
				title: b,
				body: R.slice(b.length)
			} : {
				...k,
				title: R,
				body: ""
			}
		}, [e, L]), T = o.useCallback((k = !1) => {
			m(b => !b.some(L) && b.length > 0 ? [] : k ? b : b.map(w))
		}, [L, w, m]), r = Ie(), H = o.useMemo(() => ({
			[M.Canvas]: [{
				type: D.Starter,
				title: r.formatMessage({
					id: "GMvniX",
					defaultMessage: "Help me write a birthday message for a friend"
				}),
				prompt: r.formatMessage({
					id: "JInqHw",
					defaultMessage: "Help me write a birthday message for a friend"
				}),
				body: "",
				theme: M.Canvas
			}, {
				type: D.Starter,
				title: r.formatMessage({
					id: "Xwp6O+",
					defaultMessage: "Help me write a short story"
				}),
				prompt: r.formatMessage({
					id: "e2j3PL",
					defaultMessage: "Help me write a short story set in a post-apocalyptic Tokyo, focused on a character who’s discovering a long-lost secret"
				}),
				body: "",
				theme: M.Canvas
			}, {
				type: D.Starter,
				title: r.formatMessage({
					id: "ARQf7p",
					defaultMessage: "Help me write a basic outline for an essay"
				}),
				prompt: r.formatMessage({
					id: "K0WcGA",
					defaultMessage: "Help me write a basic outline for an essay"
				}),
				body: "",
				theme: M.Canvas
			}, {
				type: D.Starter,
				title: r.formatMessage({
					id: "z+JwEj",
					defaultMessage: "Create a business plan outline"
				}),
				prompt: r.formatMessage({
					id: "4c/Ux5",
					defaultMessage: "Create a detailed outline for a business plan for a new app that connects local artists with buyers. Include sections for market analysis, monetization, and user acquisition"
				}),
				body: "",
				theme: M.Canvas
			}],
			[M.Image]: [{
				type: D.Starter,
				title: r.formatMessage({
					id: "noA7wB",
					defaultMessage: "Design a modern logo"
				}),
				prompt: r.formatMessage({
					id: "k53BuX",
					defaultMessage: "Create a modern, minimalist logo for a tech startup called ‘Nexora’. It should use bold typography and a sleek geometric icon, suitable for both light and dark backgrounds"
				}),
				body: "",
				theme: M.Image
			}, {
				type: D.Starter,
				title: r.formatMessage({
					id: "akHy6z",
					defaultMessage: "Create an invite for my birthday"
				}),
				prompt: r.formatMessage({
					id: "BXf15G",
					defaultMessage: "Please create an invite for my birthday to send to my friends. It’ll be an outdoor barbeque with music and delicious food with my closest friends and family"
				}),
				body: "",
				theme: M.Image
			}, {
				type: D.Starter,
				title: r.formatMessage({
					id: "57SKj2",
					defaultMessage: "Create a cartoon illustration of my pet"
				}),
				prompt: r.formatMessage({
					id: "EtCE7V",
					defaultMessage: "Please create an illustration of my pet in 2D animation style. It’s taking a nap in its favorite spot by the fire"
				}),
				body: "",
				theme: M.Image
			}, {
				type: D.Starter,
				title: r.formatMessage({
					id: "s5iqKS",
					defaultMessage: "Create a Renaissance-style painting"
				}),
				prompt: r.formatMessage({
					id: "mEPKGA",
					defaultMessage: "Please create a Renaissance-style painting of a Mars rover. Use techniques like chiaroscuro and a warm color palette"
				}),
				body: "",
				theme: M.Image
			}],
			[M.ContextualAnswers]: [{
				type: D.Starter,
				title: r.formatMessage({
					id: "VJy602",
					defaultMessage: "Summarize my top projects this quarter and key outcomes across all of them."
				}),
				prompt: r.formatMessage({
					id: "BADBWZ",
					defaultMessage: "Summarize my top projects this quarter and key outcomes across all of them."
				}),
				icon: t.jsx(Os, {
					className: "h-full w-full"
				}),
				body: "",
				theme: M.ContextualAnswers
			}, {
				type: D.Starter,
				title: r.formatMessage({
					id: "CXhrsc",
					defaultMessage: "Get me up to speed on the past 2 weeks of project updates."
				}),
				prompt: r.formatMessage({
					id: "WPQR3a",
					defaultMessage: "Get me up to speed on the past 2 weeks of project updates."
				}),
				icon: t.jsx(Rs, {
					className: "h-full w-full"
				}),
				body: "",
				theme: M.ContextualAnswers
			}, {
				type: D.Starter,
				title: r.formatMessage({
					id: "7QVCTa",
					defaultMessage: "Find the revenue projection for Q3 and the most profitable projects."
				}),
				prompt: r.formatMessage({
					id: "tvB7JD",
					defaultMessage: "Find the revenue projection for Q3 and the most profitable projects."
				}),
				icon: t.jsx(Is, {
					className: "h-full w-full"
				}),
				body: "",
				theme: M.ContextualAnswers
			}, {
				type: D.Starter,
				title: r.formatMessage({
					id: "Rny+bg",
					defaultMessage: "What is our company's current policy on work from home?"
				}),
				prompt: r.formatMessage({
					id: "P0W1ks",
					defaultMessage: "What is our company's current policy on work from home?"
				}),
				icon: t.jsx(ke, {
					className: "h-full w-full"
				}),
				body: "",
				theme: M.ContextualAnswers
			}],
			[M.Slurm]: [{
				body: "",
				prompt: r.formatMessage({
					id: "4XPEhn",
					defaultMessage: "Summarize all recent files relevant to me"
				}),
				title: r.formatMessage({
					id: "4XPEhn",
					defaultMessage: "Summarize all recent files relevant to me"
				}),
				theme: M.Slurm,
				type: D.Starter
			}, {
				body: "",
				prompt: r.formatMessage({
					id: "jIuX8Y",
					defaultMessage: "What’s happening this month?"
				}),
				title: r.formatMessage({
					id: "jIuX8Y",
					defaultMessage: "What’s happening this month?"
				}),
				theme: M.Slurm,
				type: D.Starter
			}, {
				body: "",
				prompt: r.formatMessage({
					id: "iOuZMh",
					defaultMessage: "What files contain action items, or require follow-up?"
				}),
				title: r.formatMessage({
					id: "iOuZMh",
					defaultMessage: "What files contain action items, or require follow-up?"
				}),
				theme: M.Slurm,
				type: D.Starter
			}, {
				body: "",
				prompt: r.formatMessage({
					id: "F5X2dt",
					defaultMessage: "What are some common themes across my files?"
				}),
				title: r.formatMessage({
					id: "F5X2dt",
					defaultMessage: "What are some common themes across my files?"
				}),
				theme: M.Slurm,
				type: D.Starter
			}],
			[M.ContextualAnswersNUX]: [{
				type: D.Starter,
				title: r.formatMessage({
					id: "BTu/JD",
					defaultMessage: "Summarize what changed in documents that I'm mentioned in"
				}),
				prompt: r.formatMessage({
					id: "BTu/JD",
					defaultMessage: "Summarize what changed in documents that I'm mentioned in"
				}),
				icon: t.jsx(ke, {
					className: "h-full w-full"
				}),
				body: "",
				theme: M.ContextualAnswersNUX,
				category: U.GDRIVE_ACTION_CONNECTOR,
				data: {
					persona: "all",
					id: "1"
				}
			}, {
				type: D.Starter,
				title: r.formatMessage({
					id: "U42BFE",
					defaultMessage: "What changed in the projects that I’m working on?"
				}),
				prompt: r.formatMessage({
					id: "L6X30C",
					defaultMessage: "What changed in the projects that I’m working on?"
				}),
				icon: t.jsx(bt, {
					className: "h-full w-full"
				}),
				body: "",
				theme: M.ContextualAnswersNUX,
				category: U.GITHUB_CONNECTOR,
				data: {
					persona: "all",
					target: "research",
					id: "2"
				}
			}, {
				type: D.Starter,
				title: r.formatMessage({
					id: "0w+ueN",
					defaultMessage: "Help me understand this codebase"
				}),
				prompt: r.formatMessage({
					id: "OlIEIs",
					defaultMessage: "Help me understand this codebase"
				}),
				icon: t.jsx(bt, {
					className: "h-full w-full"
				}),
				body: "",
				theme: M.ContextualAnswersNUX,
				category: U.GITHUB_CONNECTOR,
				data: {
					persona: "all",
					target: "research",
					id: "3"
				}
			}, {
				type: D.Starter,
				title: r.formatMessage({
					id: "iUzbht",
					defaultMessage: "Summarize my important emails from last week"
				}),
				prompt: r.formatMessage({
					id: "sinNjm",
					defaultMessage: "Summarize my important emails from last week"
				}),
				icon: t.jsx(Ps, {
					className: "h-full w-full"
				}),
				body: "",
				theme: M.ContextualAnswersNUX,
				category: U.GMAIL_CONNECTOR,
				data: {
					persona: "all",
					target: "research",
					id: "4"
				}
			}, {
				type: D.Starter,
				title: r.formatMessage({
					id: "S2bYoI",
					defaultMessage: "Help me optimize my calendar"
				}),
				prompt: r.formatMessage({
					id: "FnH01N",
					defaultMessage: "Help me optimize my calendar"
				}),
				icon: t.jsx(vt, {
					className: "h-full w-full"
				}),
				body: "",
				theme: M.ContextualAnswersNUX,
				category: U.GCAL_CONNECTOR,
				data: {
					persona: "all",
					target: "research",
					id: "5"
				}
			}, {
				type: D.Starter,
				title: r.formatMessage({
					id: "8j/xZ1",
					defaultMessage: "When is my next doctors appointment?"
				}),
				prompt: r.formatMessage({
					id: "wRD4Es",
					defaultMessage: "When is my next doctors appointment?"
				}),
				icon: t.jsx(vt, {
					className: "h-full w-full"
				}),
				body: "",
				theme: M.ContextualAnswersNUX,
				category: U.GCAL_CONNECTOR,
				data: {
					persona: "personal",
					target: "research",
					id: "6"
				}
			}, {
				type: D.Starter,
				title: r.formatMessage({
					id: "uqvKMB",
					defaultMessage: "Summarize all recent documents or notes I've created or edited"
				}),
				prompt: r.formatMessage({
					id: "QCqApZ",
					defaultMessage: "Summarize all recent documents or notes I've created or edited"
				}),
				icon: t.jsx(ke, {
					className: "h-full w-full"
				}),
				body: "",
				theme: M.ContextualAnswersNUX,
				category: U.GDRIVE_ACTION_CONNECTOR,
				data: {
					persona: "all",
					id: "7"
				}
			}, {
				type: D.Starter,
				title: r.formatMessage({
					id: "sNYNgD",
					defaultMessage: "Create a summary of all documents I've created last week"
				}),
				prompt: r.formatMessage({
					id: "SZ6IRM",
					defaultMessage: "Create a summary of all documents I've created last week"
				}),
				icon: t.jsx(ke, {
					className: "h-full w-full"
				}),
				body: "",
				theme: M.ContextualAnswersNUX,
				category: U.GDRIVE_ACTION_CONNECTOR,
				data: {
					persona: "all",
					id: "8"
				}
			}]
		}), [r]), z = Ds(e.isEmpty$), K = zt(), te = Ws(), Ze = !!(K?.isPersonalAccount() && te), We = Ls(), we = We.connectorLinks.size > 0, ue = Gs(), ne = Hs(ue, Fs.CONNECTOR_SETTING).platformConnectors.get(Mt[U.GDRIVE_ACTION_CONNECTOR]), {
			isLoading: be,
			internalKnowledgeConfigs: Y
		} = Us(), G = (Y?.filter(k => k.user_connection_details.auth_status === "not_connected").length ?? 0) > 0, Le = (ne && ne.status !== "DISABLED_BY_ADMIN") ?? G, {
			availableConnectors: ve,
			isLoading: Me
		} = zs(), {
			availableConnectors: tt,
			isLoading: Ge
		} = Bs(), $ = ve.length > 0 && !G && !we, _e = $ ? gt(p, "2546207663").get("enabled", !1) : !1, me = o.useCallback((k, b) => {
			if (b.type === D.Starter && b.theme === M.ContextualAnswersNUX) {
				const {
					data: R
				} = b, {
					link: F
				} = R;
				window.location.hash = F + `&suggestedPromptsText=${encodeURIComponent(b.prompt)}`, oe.logEventWithStatsig("chatgpt_contextual_answers_recommended_prompt_selected", "chatgpt_contextual_answers_recommended_prompt_selected", {
					prompt_id: b.data?.id,
					prompt_position: b.data?.position
				}), k.preventDefault();
				return
			}
		}, []), he = o.useMemo(() => new qa({
			localStorageKey: Vs.CARecommendedPromptsUpsell,
			schedule: {
				intervalMs: 7 * 24 * 60 * 60 * 1e3
			},
			termination: {
				maxShows: 3
			}
		}), []);
		o.useEffect(() => {
			if ((!$ || !_e || h != null || !he.shouldShow()) && !c || Me || be || Ge || K == null) return;
			const k = new Set(ve.map(E => E.type)),
				b = new Set(tt.map(E => E.type)),
				R = K?.isPersonalAccount() ? "personal" : "team";
			let F = H[M.ContextualAnswersNUX].filter(E => {
				if (E.data?.persona !== void 0 && E.data?.persona !== R && E.data?.persona !== "all") return !1;
				const q = E.category,
					Z = E.data?.target === "research";
				return q === U.GDRIVE_ACTION_CONNECTOR ? Le : Z ? b.has(q) : k.has(q)
			});
			F.length < 3 || (F.sort(() => Math.random() - .5), F = F.slice(0, f).map((E, q) => {
				const Z = E.category,
					je = E.data?.target === "research" ? "research" : "connectors",
					ce = `#settings/${Ys.Connectors}?connector=${Mt[Z]}&add-connector-link=true&target=${je}`;
				return E.data = {
					link: ce,
					id: E.data?.id,
					position: q.toString()
				}, E.onSelectOverride = me, {
					...E
				}
			}), m(E => E.length > 0 ? E : (_.current || (he.recordShown(), oe.logEventWithStatsig("chatgpt_contextual_answers_recommended_prompt_shown", "chatgpt_contextual_answers_recommended_prompt_shown", {
				prompts: F.map(q => q.data?.id).join(","),
				shown_times: he.getShownTimes().toString()
			}), _.current = !0), F)))
		}, [H, f, m, $, K, _e, G, ve, Me, be, Le, we, We.connectorLinks, Y, Ze, h, me, he, c, Ge, tt, d]);
		const re = cs(p);
		o.useEffect(() => {
			const k = () => {
				m(b => b.filter(R => R.theme !== M.Search && R.theme !== M.ChatGPTTrending && R.theme !== M.Image && R.theme !== M.Slurm && R.theme !== M.ContextualAnswersNUX))
			};
			if (z && n && !i && !a || c) {
				if (v) m(C.length > 0 ? C : []), A.current.bing === 0 && (A.current.bing = Date.now(), u());
				else if (re.get("enabled", !1) && !h) {
					m(j && g.length > 0 ? g : []);
					const b = Date.now(),
						R = A.current.chatgpt;
					(R === 0 || b - R > En) && (A.current.chatgpt = b, S())
				} else if (h === Ee.PictureV2) {
					const b = Ko(r);
					m(b)
				} else if (h !== Ee.Tatertot)
					if (h === Ee.Slurm) {
						const b = l.get("suggestions-for-connector");
						if (!b) return;
						const R = H[M.Slurm].map(F => {
							let E = null;
							switch (b) {
								case U.BOX_CONNECTOR:
									E = t.jsx(Qs, {
										className: "h-full w-full"
									});
									break;
								case U.DROPBOX_CONNECTOR:
									E = t.jsx(qs, {
										className: "h-full w-full"
									});
									break;
								case U.SHAREPOINT_CONNECTOR:
									E = t.jsx($a, {
										className: "h-full w-full"
									});
									break;
								case U.GDRIVE_ACTION_CONNECTOR:
									E = t.jsx(ke, {
										className: "h-full w-full"
									});
									break
							}
							return {
								...F,
								icon: E
							}
						});
						R.length > 0 && m(R)
					} else {
						if (d.length > 0 && d[0].theme === M.ContextualAnswersNUX) return;
						k()
					}
			} else k()
		}, [z, u, S, re, v, m, C, g, h, j, r, s, n, i, a, H, l, y, d, c]), o.useEffect(() => {
			if (z) {
				const k = d.filter(b => b.type !== D.Autocomplete);
				k.length > 0 && kt(k, s)
			}
		}, [z, d, s]);
		const ge = f - d.filter(L).length,
			se = Dn(v),
			Ne = ee(p, "4031588851"),
			Te = Ne.get("autocomplete_min_char", 4),
			He = Ne.get("autocomplete_fetch_interval", 200),
			ie = o.useRef(null),
			J = o.useCallback(Qa(async k => {
				const b = e.getCurrentText();
				if (!b || b.length < Te || b.length > 80 || e.hasMultipleLines()) {
					m([]);
					return
				}
				if (!N && !(ie.current && ie.current.length > Te && b.startsWith(ie.current))) try {
					const R = (await Pn({
						text: b,
						numCompletions: k,
						isUnauthenticated: W,
						isThreadUsingSearchMode: v,
						autocompleteMode: se,
						activeSystemHintType: h
					})).filter(L).map(w);
					m(F => {
						const E = F.filter(L),
							q = R.filter(Z => {
								const le = at(Z);
								return !E.some(je => {
									const ce = at(je);
									if (le === ce) return !0;
									const Be = /[\p{P}\p{S}]$/u,
										Ve = le.replace(Be, ""),
										X = ce.replace(Be, "");
									return Ve === ce || le === X || Ve === X
								})
							}).slice(0, f - E.length);
						return [...E, ...q]
					}), R.length > 0 && kt(R, s)
				} catch {}
			}, se === "BING" ? 150 : He), [e, se, w, He, h]),
			Fe = o.useCallback(() => {
				T(), ge > 0 && J(ge)
			}, [J, T, ge]);
		o.useEffect(() => {
			N && m([])
		}, [N, m]);
		const pe = o.useMemo(() => se === "HARDCODED" ? T : Fe, [se, Fe, T]),
			Ue = o.useCallback(() => {
				pe()
			}, [pe]),
			ze = o.useCallback(() => {
				e instanceof zo && T(!0), e.getCurrentText().indexOf(`
`) > 0 && m([])
			}, [e, m, T]);
		return o.useEffect(() => e.subscribe("input", () => {
			Ue()
		}), [e, Ue]), o.useEffect(() => e.subscribe("change", () => {
			ze()
		}), [e, ze]), {
			autocompletions: d
		}
	}, Rn = () => {
		const [s, e] = o.useState([]), [i, n] = o.useState([]), a = pt(), l = V(), y = cs(l), c = y.get("num_mobile_results", kn), p = y.get("num_desktop_results", An), N = o.useCallback(async () => {
			const x = (await Oe.safePost("/conversation/experimental/generate_trending_suggestions", {
				requestBody: {
					num_items: ls
				},
				authOption: ot.SendIfAvailable
			})).suggestions.map((f, m) => ({
				type: D.Trending,
				title: Dt(f),
				body: "",
				icon: t.jsx(Et, {
					className: "h-full w-full"
				}),
				prompt: Dt(f),
				id: `search-trending-${m}`,
				theme: M.Search
			}));
			return e(x), x
		}, []), h = o.useCallback(async () => {
			const x = (await Oe.safeGet("/trending/chatgpt", {
				parameters: {
					query: {
						num_items: a ? p : c
					}
				},
				authOption: ot.SendIfAvailable
			})).topics.map((f, m) => ({
				type: D.Trending,
				title: f.title,
				body: "",
				icon: t.jsx(Et, {
					className: "h-full w-full"
				}),
				prompt: f.prompts[Math.floor(Math.random() * f.prompts.length)],
				id: `chatgpt-trending-${m}`,
				theme: M.ChatGPTTrending
			}));
			return n(x), x
		}, [a, c, p]);
		return {
			bingTrendingSuggestions: s,
			chatgptTrendingSuggestions: i,
			fetchBingTrendingSuggestions: N,
			fetchChatgptTrendingSuggestions: h
		}
	};

function Dt(s) {
	return s.split(" ").map(Xa).join(" ")
}
const at = s => `${s.title}${s.body}`.toLocaleLowerCase();

function In() {
	const s = V(),
		i = ee(s, "4031588851", {
			disableExposureLog: !0
		}).get("autocomplete_qualified_start_date", "2099-09-13T00:00:00Z"),
		n = es();
	return !!n && n.created * 1e3 >= new Date(i).getTime()
}

function Dn(s) {
	const {
		isUnauthenticated: e
	} = Ce(), i = V(), n = Q(i, "1468311859"), a = Q(i, "2053937752"), l = Q(i, "3664702598"), y = Q(i, "471233253"), c = ee(i, "4031588851"), p = ee(i, "3533083032"), N = In(), h = !e && n || e && a, d = (!e && l || e && y) && N;
	let x = "HARDCODED";
	{
		const f = e ? p : c;
		if (s) {
			const m = f.get("search_autocomplete_mode", "");
			h && m && (x = m)
		} else d && (x = f.get("autocomplete_mode", "HARDCODED"))
	}
	return x
}
const Wn = ({
		clientThreadId: s,
		isGizmoThread: e,
		isNewThread: i,
		isProjectThread: n
	}) => {
		const a = Je(),
			{
				autocompletions: l
			} = On({
				clientThreadId: s,
				composerController: a,
				isGizmoThread: e,
				isNewThread: i,
				isProjectThread: n
			});
		return o.useEffect(() => (a.store.setState({
			autocompletions: l
		}), () => {
			a.store.setState({
				autocompletions: []
			})
		}), [l, a]), null
	},
	Ln = ({
		clientThreadId: s
	}) => {
		const e = V(),
			i = yt(f => f.activeStageSidebar),
			n = ft(s),
			a = Ka($s.WorkspaceShareLinks),
			{
				isUnauthenticated: l
			} = Ce(),
			y = Vt(),
			c = ct(s),
			p = Ke(c),
			N = Q(e, "16480203"),
			h = Ja(),
			d = a && n && !l && !y && (!p || N) && !h,
			x = !i;
		return t.jsx("div", {
			className: "flex items-center",
			id: "conversation-header-actions",
			children: t.jsx(Yo, {
				showShareButton: d,
				showProfileDropdown: x,
				clientThreadId: s
			})
		})
	},
	Gn = it(() => lt(() => import("./cof7kd1m2fzgw8jn.js"), __vite__mapDeps([10, 2, 1, 3, 11, 12, 4, 5, 13, 14, 15, 16, 17, 18, 19, 8, 7, 20, 21, 22, 6, 9, 23])).then(s => s.GizmoUsingAsOwnerNotice));

function Hn({
	clientThreadId: s,
	transparentBackground: e,
	isEmptyState: i
}) {
	const n = V(),
		a = ts(n),
		l = ct(s),
		y = Ke(l),
		c = Za(),
		{
			data: p
		} = St(l),
		N = mt(),
		h = pt(),
		d = Xs(),
		x = Qe(s),
		f = yt(P => P.isConversationScrolledFromTop),
		m = ye(s, P => ae.hasUserMessage(P)) || !x,
		v = ss(),
		C = v && d,
		{
			shouldShowCenterGetTeamPill: g
		} = eo(C),
		{
			shouldShowLeftGetPlusPill: u,
			shouldShowCenterGetPlusPill: S
		} = to(s, C),
		A = !Xe(n) && !m && gt(n, "1697094676").get("hide_dropdown", !1),
		_ = h && (y || !l) ? t.jsx(io, {
			children: t.jsx(lo, {
				children: u ? t.jsx("div", {
					className: "text-token-text-primary px-3 text-lg",
					children: Pe
				}) : A ? null : t.jsx(It, {
					clientThreadId: s
				})
			})
		}) : u ? t.jsx("div", {
			className: "text-token-text-primary px-3 text-lg",
			children: Pe
		}) : A ? null : t.jsx(It, {
			clientThreadId: s
		}),
		j = t.jsx(co, {
			clientThreadId: s,
			children: t.jsx(Ln, {
				clientThreadId: s
			})
		});
	return t.jsxs(t.Fragment, {
		children: [t.jsxs(so, {
			id: "page-header",
			className: B("pointer-events-none select-none [view-transition-name:var(--vt-page-header)] *:pointer-events-auto motion-safe:transition max-md:hidden", i && "absolute start-0 end-0", y && x && "sharp-edge-on-scroll-start sticky top-0", !l && "@[84rem]/thread:absolute @[84rem]/thread:start-0 @[84rem]/thread:end-0 @[84rem]/thread:shadow-none!", !l && !v && "@[84rem]/thread:bg-transparent", e && !v && "bg-transparent", !a && f ? "[box-shadow:var(--sharp-edge-top-shadow)]" : "[box-shadow:var(--sharp-edge-top-shadow-placeholder)]", a && "[box-shadow:var(--sharp-edge-top-shadow-placeholder)] group-data-scroll-from-top/thread:[box-shadow:var(--sharp-edge-top-shadow)]", f && S && "@[84rem]/thread:bg-token-main-surface-primary @[84rem]/thread:[box-shadow:var(--sharp-edge-top-shadow)]!"),
			children: [t.jsxs("div", {
				className: "absolute start-1/2 ltr:-translate-x-1/2 rtl:translate-x-1/2",
				children: [p != null && N?.isWorkspaceAccount() && p.gizmo.tags?.includes(ao.WorkspaceDisabled) && t.jsx(Gn, {
					gizmo: p
				}), t.jsx(oo, {
					gizmoId: l,
					clientThreadId: s
				}), g ? t.jsx(no, {}) : S ? t.jsx(Pt, {}) : null, C && t.jsx(en, {})]
			}), t.jsxs("div", {
				className: "flex items-center",
				children: [t.jsx(qo, {
					clientThreadId: s
				}), _, u && !g && t.jsx(Pt, {})]
			}), t.jsx("div", {
				className: "flex items-center",
				children: j
			})]
		}), c && t.jsx(ro, {})]
	})
}
const Fn = it(() => lt(() => import("./ovtejqbx9cqf6kqz.js"), __vite__mapDeps([24, 2, 4, 1, 3, 5, 25, 26])));

function Un({
	clientThreadId: s
}) {
	const e = $t(),
		i = ft(s),
		n = ye(s, ae.getGizmoId),
		a = async () => {
			i && (await qt.patchConversation(i, {
				is_archived: !1
			}), e.invalidateQueries({
				queryKey: ["conversation", s]
			}), ga(i, l => {
				l.isArchived = !1
			}), as(e, n))
		};
	return t.jsxs("div", {
		className: "my-6 flex flex-col items-center justify-center gap-4",
		children: [t.jsx("div", {
			className: "text-token-text-secondary px-3 text-center text-sm",
			children: t.jsx(de, {
				id: "thread.archivedConversationDescription",
				defaultMessage: "This conversation is archived. To continue, please unarchive it first."
			})
		}), t.jsx("div", {
			children: t.jsx(Ut, {
				disabled: !i,
				onClick: a,
				icon: Go,
				children: t.jsx(de, {
					id: "thread.unarchiveButton",
					defaultMessage: "Unarchive"
				})
			})
		})]
	})
}
const zn = function({
		clientThreadId: s,
		getGizmosCompletionParams: e,
		hideDisclaimer: i,
		hideHeader: n,
		messagesVerticalAlign: a = "top",
		renderEmptyState: l
	}) {
		"use forget";
		const y = Ks(),
			c = V(),
			p = ts(c),
			N = pt(),
			{
				data: h
			} = dt(),
			d = uo(s),
			x = Js(),
			[f, m, v, C, g, u, S, A] = ye(s, I => [I?.isLoading, ae.getCurrentLeafId(I), ae.hasUserMessage(I), ae.getConversationTurns(I).length, ae.isArchived(I), I?.modelId, I ? ae.getGizmoId(I) : x, I?.conversationOrigin === pa.APPLE]),
			_ = ft(s),
			j = $t(),
			{
				prefetchSearchPromises: P
			} = Vo(),
			[W] = xt(),
			L = !!W.get("message"),
			[w] = o.useState(P?.query),
			[T, r] = o.useState(P?.navlink);
		o.useEffect(() => {
			f || (Qe(s) ? _t.addTiming("chatgpt.web.chatPage.renderNewConversation") : _t.addTiming("chatgpt.web.chatPage.renderExistingConversation"))
		}, [s, f]);
		const {
			setTargetedContent: H
		} = mo(), z = y?.includes(Zs), K = null, te = C >= 2, Ze = Q(c, "1909635392"), We = o.useContext(ea), [we, ue] = ta(I => [sa(I), aa(I)]), et = oa(), ne = ss(), {
			isOpen: be
		} = $o(), Y = !!S, G = Qe(s) && !te && (Ot(d) || d?.kind === na.GizmoTest) && !et && !ne && P == null && (!we || Y), Le = Q(c, "733205176"), ve = Q(c, "537200474");
		ho(_, Le), go();
		const Me = G && !v && P == null && (!we || Y),
			Ge = ra(h).id,
			$ = u ?? Ge,
			_e = !!u,
			me = Lt.useStore();
		o.useEffect(() => {
			if ($ === ia) return me.setActiveSystemHint(Nt, {
				locked: !0,
				analyticsMetadata: {
					clientThreadId: s
				}
			}), () => {
				me.setActiveSystemHint(null, {
					locked: !1,
					ifPrevSystemHint: Nt,
					analyticsMetadata: {
						clientThreadId: s
					}
				})
			}
		}, [$, me, s]);
		const he = la(h?.models, $),
			re = po(s, d),
			ge = fo();
		o.useEffect(() => {
			ge || H(void 0)
		}, [s, H, ge, m]), o.useEffect(() => {
			Re.setIsConversationScrolledFromTop(!1)
		}, [s]), o.useEffect(() => {
			const I = new URLSearchParams(window.location.search),
				Ae = I.get("src");
			if (Ae === "history_search") {
				I.delete("src");
				const qe = I.toString(),
					gs = `${window.location.pathname}${qe?`?${qe}`:""}${window.location.hash}`;
				window.history.replaceState({}, document.title, gs)
			}
			_ && Ae === "history_search" && qt.patchConversation(_, {
				touch: !0
			}).then(() => {
				as(j, S)
			})
		}, [_, S, j]);
		const se = Bo(s),
			Ne = o.useCallback(I => {
				se(e ? e(I) : I)
			}, [se, e]),
			Te = xo(),
			He = ca(),
			ie = o.useRef(null);
		ie.current = I => {
			G && !He && gt(c, "3253785454").get("should_animate_composer", !1) ? So({
				className: Uo["composer-slide"],
				update: () => Ne(I)
			}) : Ne(I)
		};
		const J = o.useCallback(I => ie.current?.(I), [ie]);
		o.useEffect(() => {
			Te.signalTransitionReady()
		}, [Te, s]), yo(), Co(s, J), wo(s);
		const Fe = bo({
				clientThreadId: s,
				handleRequestCompletion: J,
				prefetchSearchThreadIdPromise: P?.threadId
			}) && w == null,
			pe = o.useRef(null),
			Ue = I => {
				if (p) return t.jsx(Ho, {
					allowScrollToEnd: !ue,
					allowScrollToTop: !ue && A,
					clientThreadId: s,
					initScrolledToEnd: w == null && !L,
					threadFooterRef: Z,
					threadRootRef: E,
					children: I
				});
				{
					const Ae = t.jsx("div", {
						className: "relative h-full",
						children: t.jsxs("div", {
							className: B("flex h-full flex-col overflow-y-auto [scrollbar-gutter:stable_both-edges] @[84rem]/thread:pt-(--header-height)"),
							ref: pe,
							children: [t.jsx(ma, {
								setIsScrolledToEdge: qe => {
									Re.setIsConversationScrolledFromTop(qe)
								},
								options: {
									root: pe?.current
								}
							}), I]
						})
					});
					return w != null ? Ae : t.jsx(ha, {
						children: t.jsxs(o.Suspense, {
							fallback: null,
							children: [t.jsx(Fo, {}), Ae]
						})
					})
				}
			};
		o.useEffect(() => {
			ne || (document.title = re ?? "ChatGPT")
		}, [re, K, ne]);
		const ze = da(We),
			k = mt(),
			b = k && !k.isTeam() && !k.isEnterprisey(),
			R = !i && !ze && !ue && !(G && b) && Ot(d),
			F = Zt(s).isOdysseyMode,
			E = o.useRef(null),
			q = o.useRef(null),
			Z = o.useRef(null),
			le = vo(I => I.composerHeight),
			je = o.useMemo(() => ({
				threadContentScrollContainerElementRef: q,
				footerRootContainerElementRef: Z
			}), []),
			ce = !G && !be,
			Be = ht(),
			Ve = Ke(S),
			X = Y && Ve,
			Ye = !X,
			ds = G,
			us = o.useCallback(() => r(void 0), []);

		function ms() {
			return f || Fe ? null : Me ? l ?? t.jsx(t.Fragment, {
				children: Y ? t.jsx(Qo, {
					clientThreadId: s,
					gizmoId: S,
					onRequestCompletion: J,
					currentModelId: $
				}) : t.jsx(wn, {
					clientThreadId: s,
					currentModelId: $,
					isModelLoaded: _e
				})
			}) : te || w != null ? Ue(t.jsx(tn, {
				onRequestCompletion: J,
				clientThreadId: s,
				scrollContainerRef: pe,
				pageLoadSearchQuery: w,
				prefetchNavlink: T,
				clearPrefetchNavlink: us
			}, s)) : null
		}
		const hs = Q(c, "422449809");
		return t.jsx(Mo.Provider, {
			value: T ? "user-query-with-navlink" : w ? "user-query" : null,
			children: t.jsx(_o, {
				serverThreadId: _,
				children: t.jsx(No, {
					clientThreadId: s,
					children: t.jsxs(os, {
						clientThreadId: s,
						children: [t.jsx(Vn, {
							clientThreadId: s,
							conversationTurnsLength: C
						}), z && t.jsx(Fn, {}), !ne && t.jsx(To, {
							children: re != null && t.jsx("title", {
								children: re
							})
						}), t.jsx(ua.Provider, {
							value: J,
							children: t.jsxs(jo, {
								children: [t.jsx("div", {
									id: "thread",
									ref: E,
									className: B("group/thread @container/thread h-full w-full", p && Po.threadRoot),
									children: t.jsxs(Jo, {
										noKeyboard: !0,
										clientThreadId: s,
										currentModelConfig: he,
										className: B("composer-parent flex h-full flex-col focus-visible:outline-0", !X && "overflow-hidden"),
										children: [t.jsxs(Ao, {
											value: je,
											children: [!n && t.jsx(Hn, {
												clientThreadId: s,
												isEmptyState: Me
											}), Ze && t.jsx(ko, {
												clientThreadId: s
											}), t.jsxs("div", {
												ref: q,
												className: B("flex basis-auto flex-col", ce && "-mb-(--composer-overlap-px) [--composer-overlap-px:55px]", X || Y || !G ? "grow" : "shrink", !G && "overflow-hidden", G && !X && !Y && "min-[510px]:max-[768px]:mt-[25dvh]! @max-[31.9rem]/thread:grow @max-[31.9rem]/thread:justify-center @lg/thread:mt-[calc(30dvh+25px)]"),
												style: {
													"--composer-height": le ? `${le}px` : void 0
												},
												children: [ms(), !1]
											})]
										}), t.jsxs("div", {
											id: "thread-bottom-container",
											className: B("content-fade relative isolate z-10 w-full basis-auto has-data-has-thread-error:pt-2 has-data-has-thread-error:[box-shadow:var(--sharp-edge-bottom-shadow)] md:border-transparent md:pt-0 dark:border-white/20 md:dark:border-transparent", G && "min-h-0", !R && !ue && !F && "mb-4", Y || X || !G ? "" : Ye && G && Be ? "@lg/thread:grow" : "lg:grow", Ye && "flex flex-col"),
											ref: Z,
											children: [g ? t.jsx(Un, {
												clientThreadId: s
											}) : t.jsxs(t.Fragment, {
												children: [(!G || Ye) && !be && t.jsxs(t.Fragment, {
													children: [t.jsx(Yn, {
														isGizmoThread: Y,
														isProjectThread: X,
														clientThreadId: s,
														isNewThread: G,
														currentModelId: $,
														onRequestCompletion: J,
														shouldUseUnifiedComposer: Ye,
														isModelLoaded: _e
													}), N && G && ve && t.jsx(pn, {
														clientThreadId: s
													})]
												}), ds && t.jsx(Wn, {
													clientThreadId: s,
													isGizmoThread: Y,
													isNewThread: G,
													isProjectThread: X
												})]
											}), R ? t.jsx("div", {
												className: "text-token-text-secondary relative mt-auto flex min-h-8 w-full items-center justify-center p-2 text-center text-xs md:px-[60px]",
												children: t.jsx(Eo, {
													clientThreadId: s
												})
											}) : null]
										})]
									})
								}), t.jsx(Oo, {
									clientThreadId: s,
									isStaticSharedThread: !1,
									isDynamicSharedThread: et
								}), t.jsx(Ro, {}), hs && t.jsx(Io, {}), t.jsx(ln, {
									conversationId: s
								}), t.jsx(Do, {}), t.jsx(Wo, {
									conversationId: s
								}), !1]
							})
						})]
					})
				})
			})
		})
	},
	nr = Qt.memo(zn);

function Bn({
	clientThreadId: s,
	conversationTurnsLength: e
}) {
	return Lo(e, s), null
}
const Vn = Qt.memo(Bn);

function Yn(s) {
	return t.jsx(Zo, {
		...s
	})
}
export {
	Ln as C, nr as M, It as T
};
//# sourceMappingURL=h4y2be58evzp50oz.js.map