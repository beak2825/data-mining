const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/hb15k43bxae6bvdr.js","assets/fyeo2h7okrqcf3nz.js","assets/egb2c0f6p1ew61vt.js","assets/root-dql6y2cb.css","assets/j9r31uevvfqo7e55.js","assets/k8bi9d63xvcw374i.js","assets/f7j18j5u52u1pnnk.js","assets/conversation-small-k592qa8k.css"])))=>i.map(i=>d[i]);
import{r as _,e as H,j as t,M as j,v as Os,c as W,k as ne,L as Qt,n as es,A as Ls,u as vt,R as ts,d as bt,f as St}from"./fyeo2h7okrqcf3nz.js";import{nL as Xe,kl as Rs,dF as Us,nM as Bs,nN as Bt,iQ as Hs,eB as y,dZ as yt,dG as $s,nO as ft,nP as qs,nQ as Ws,nR as Vs,nS as Ks,nT as Xs,nU as Zs,nV as ss,nW as We,bf as Ct,nX as Ht,nY as Ys,nZ as Js,kV as Mt,kU as ns,n_ as _t,aZ as Qs,aY as en,m3 as tn,mG as sn,n$ as os,o0 as nn,mx as as,o1 as is,o2 as on,eS as an,o3 as rn,d as ln,o4 as cn,gX as dn,o5 as $t,o6 as un,o7 as mn,o8 as rs,o9 as fn,oa as gt,cs as ls,j2 as Ze,jY as gn,ob as cs,bk as Ve,dW as ds,oc as us,od as xn,oe as hn,dS as pn,mD as jn,of as vn,ej as bn,hr as Sn,dC as ke,ek as ms,og as yn,b1 as fs,kW as gs,kX as Cn,oh as Mn,oi as _n,oj as Ie,ok as wn,dX as qt,g$ as In,bt as xs,aT as ee,U as X,ol as hs,cm as Nn,om as ps,k2 as kn,on as Tn,d$ as wt,mw as zn,jV as Pn,k4 as Gn,oo as Fn,op as En,oq as Dn,bu as Wt,or as js,e0 as vs,os as An,hp as bs,be as Ss,fl as On,hm as Ln,fW as Rn,ot as ys,nB as Ke,jS as Un,ou as Bn,ov as Hn,ow as $n,km as qn,m as Wn,y as Vn,A as Kn,ox as Xn,eX as Zn,a8 as Yn,oy as Jn,mZ as Qn,m1 as eo,cP as to,mH as so,c2 as no,oz as oo,bE as ao,oA as io,cA as Ye,oB as ro,lb as lo,k7 as co,l2 as uo,kg as mo,kh as fo,f7 as go,oC as xo,oD as ho,l6 as po,oE as jo,k5 as vo,oF as bo,aU as Vt,gQ as So,ba as yo,l5 as Co,jT as Mo,oG as _o}from"./f7j18j5u52u1pnnk.js";import{b7 as Te,ck as It,lR as wo,ay as Je,lS as Io,kM as No,hB as Ce,kN as ko,hD as To,A as te,a_ as zo,P as B,dy as Po,ea as dt,fC as Go,lT as xt,lU as ht,gt as Fo,fD as Eo,cL as ut,b6 as Qe,dM as Nt,q as E,bX as Do,B as re,dZ as Ao,f as U,hg as Oo,jk as Lo,cg as Ro,cv as Uo,cU as et,b9 as Cs,bE as Ms,d0 as Bo,cZ as ze,c_ as Pe,cl as kt,lH as _s,aw as Tt,aS as se,a0 as Ho,w as S,l as ws,T as le,a8 as Kt,d2 as zt,hC as $o,d3 as Pt,hr as Ge,t as qo,lC as Wo,iK as Vo,cj as Ko,bp as Is,it as Xo,dV as Ns,F as Zo,kH as Yo,cC as Jo,a1 as Gt,cs as Ne,h3 as Qo,b8 as ie,cE as ea,kw as ta,d4 as tt,fJ as sa,eX as na,d$ as ks,dT as oa,Q as aa,d1 as ia,R as Ft,c as ra,aA as la,x as Et,o as ca,g1 as da,hu as ua,f6 as ma,cJ as fa,cK as ga,dI as xa,S as ha,J as pa,ax as ja,a$ as pt,H as Xt}from"./egb2c0f6p1ew61vt.js";import{e as Dt,f as va}from"./lqc3mxovgoy4h7eq.js";import{b as ba,D as jt,P as Sa,c as ya}from"./mzdwbfzlwdoj9187.js";import{u as Ca}from"./odn3jimzeso6ws9q.js";import{T as Ma,g as _a,u as wa}from"./cbrjkkbokuo79ldz.js";import{u as Ia}from"./ixsisjuxwij5x7d3.js";const Ts=Te.div`text-sm text-red-500`,Na=5,ka=20,Ta=40,za=s=>{switch(s){case te.FREE:return Na;case te.PLUS:case te.EDUCATION:case te.QUORUM:case te.DEPRECATED_ENTERPRISE:case te.DEPRECATED_EDU:return ka;case te.PRO:case te.TEAM:case te.BUSINESS:return Ta}};function zs({onClose:s,gizmo:e}){const n=H(),[o,i]=_.useState(e?.gizmo?.instructions||""),a=Xe(),l=Je(),r=[];o?.length>ft&&r.push(n.formatMessage(y.instructionsTooLong,{length:ft}));const c=g=>{i(g.target.value)},d=()=>{s()},m=async()=>{try{await a.mutateAsync({update:{instructions:o??""},id:e.gizmo.id}),s()}catch(g){const b=Nt(g);l.danger(b??"Error",{duration:2,toastId:"custom_instructions_modal_save_error"})}},u=t.jsx(ut.Button,{title:n.formatMessage(y.save),color:"primary",onClick:m,loading:a.isPending,disabled:r.length>0}),x=t.jsx(ut.Button,{title:n.formatMessage(y.cancel),color:"secondary",onClick:d,disabled:a.isPending}),{canEdit:h}=Ce(e);return t.jsx(Qe,{testId:"modal-project-custom-instructions",className:"min-h-[50dvh] max-w-[820px]",isOpen:!0,showCloseButton:!a.isPending,hideSeparator:!0,noPadding:!0,size:"custom",type:"success",title:t.jsx("div",{className:"h-8",children:n.formatMessage(y.editCustomInstructionsTitle)}),onClose:()=>{a.isPending||s()},children:t.jsxs("div",{className:"flex h-full flex-col px-4 pt-0 pb-4",children:[t.jsx("div",{className:"text-sm font-medium",children:n.formatMessage(h?y.editCustomInstructionsSubtitle:y.readOnlyCustomInstructionsTitle)}),t.jsx("div",{className:"text-token-text-secondary text-sm",children:n.formatMessage(h?y.editCustomInstructionsDescription:y.readOnlyCustomInstructionsDescription)}),t.jsx("textarea",{autoFocus:!0,placeholder:n.formatMessage(y.projectInstructionsPlaceholder),className:"focus:ring-token-text-primary border-heavy mt-4 mb-1 min-h-24 w-full grow resize-none overflow-x-clip overflow-y-auto rounded-lg border bg-transparent px-3 py-2 focus:ring-2",name:"instructions",onChange:c,value:o,disabled:a.isPending||!h}),r.map(g=>t.jsx(Ts,{className:"mt-1",children:g},g)),h&&t.jsx(ut.Actions,{primaryButton:u,secondaryButton:x})]})})}function Pa({gizmoId:s,gizmoName:e,canEdit:n,gizmoEditorData:o,openFileDialog:i,pendingFiles:a,setVersion:l,pendingFileUpsertMutationsRef:r,currentModelConfig:c}){const d=o?.files?.reduce((f,p)=>f+(p.file_size_tokens??0),0)??0,m=o?.contextStuffingBudget;let u;m&&(u=d/m,d>0&&u<.01&&(u=.01));const x=o?.files??[],h=Array.from(a.current.values()).filter(f=>x.every(p=>p.file_id!==f.fileId)),g=h.filter(f=>c!=null&&xt(c,f.file.type,f.file.name)===ht.CodeInterpreter),b=x.filter(f=>c!=null&&f.type!=null&&xt(c,f.type,f.name)===ht.CodeInterpreter),v=[...g.map(f=>f.tempId),...b.map(f=>f.file_id)];return t.jsx(Vs,{gizmoId:s,gizmoName:e,canEdit:n,pendingFiles:h,pendingFileUpsertMutationsRef:r,files:x,modelCapacityUsed:u,interpreterOnlyFileIds:v,onAddFiles:i,removePendingFile:f=>{a.current.delete(f),l(p=>p+1)}})}const Ga=_.forwardRef(function({gizmo:e,accountPlanType:n,showInstructions:o=!0},i){const a=za(n),l=H(),[r,c]=_.useState(!1),d=Xe(),m=Rs(e),u=Us(m),{data:x}=It(),h=x?.models.get(wo)??(x&&Bs(x.models.values(),z=>z.tags.includes(zo.GPT_4o))),g=Je(),[b,v]=_.useState(0),f=_.useRef(new Map),p=_.useRef([]),C=Io(h,void 0),M=z=>{z.some(({errors:O})=>O.length!==1||O[0]?.code!==Bt.TooManyFiles)?g.danger(y.unknownError,{duration:2,toastId:"snorlax_handle_file_rejected"}):g.danger(l.formatMessage(y.dragTooManyFilesError,{maxFileLimit:a}),{duration:2,toastId:"snorlax_handle_file_rejected",loggingTitle:"drag_too_many_files_error"})},w=async z=>{B.logEvent("Upload File",{client:"web",eventSource:"mouse",intent:"gizmo"});const O=m.id;z.length>0&&await Promise.all(z.map(P=>{const oe=Po(P);f.current.set(oe,{tempId:oe,gizmoId:O,file:P,status:dt.Uploading,progress:1,fileId:null,cdnUrl:null}),Go(oe,P,l,g,{kind:Eo.Gizmo,gizmoId:O},{onFileUploaded:async(A,Y,J,Z)=>{const V=f.current.get(A);V?.fileId&&V?.fileId&&(p.current.push({id:e.gizmo.id,mutationId:Os(),update:K=>{if(!V.fileId)return K;const _e=[...K.files??[],{file_id:V.fileId,name:V.file.name,size:V.file.size,type:Z?.mimeType??Fo(V.file),last_modified:V.file.lastModified,file_size_tokens:Z?.fileTokenSize}];return{...K,files:_e}},onSuccess:()=>{f.current.delete(A),v(K=>K+1)}}),Ws(e.gizmo.id)({gizmoId:e.gizmo.id,upsertProjectMutation:d,pendingFileUpsertMutationsRef:p}))},onFileCreated:(A,Y,J)=>{f.current.set(A,{tempId:A,gizmoId:O,file:P,status:dt.Uploading,progress:1,...f.current.get(A),fileId:Y,cdnUrl:J}),v(Z=>Z+1)},onFileUploadProgress:(A,Y)=>{const J=f.current.get(A);J?.status===dt.Uploading&&f.current.set(A,{...J,progress:Y>95?95:Y}),v(Z=>Z+1)},onError:A=>{f.current.delete(A),v(Y=>Y+1)}},{usesRetrievalIndex:h!=null&&xt(h,P.type,P.name)===ht.Retrieval})}))},I=No(C),k=ba(I),N=f.current.size+m.files.length,{canEdit:$}=Ce(e),{open:L,getInputProps:D,getRootProps:T,isDragAccept:R,isDragReject:G}=Ca({noClick:!0,noKeyboard:!0,noDragEventsBubbling:!0,onDropAccepted:w,onDropRejected:M,multiple:!0,maxSize:ko,maxFiles:a-N,validator:()=>N>=a?{code:Bt.TooManyFiles,message:"Too many files"}:null,...I});return _.useImperativeHandle(i,()=>({openFileDialog:L})),t.jsxs("div",{...T({className:"h-full px-4"}),children:[t.jsx("input",{...D()}),o&&t.jsxs(Hs,{children:[t.jsx("button",{className:"w-full",onClick:()=>c(!0),children:t.jsx("div",{className:"border-token-border-default w-full rounded-lg border text-start text-sm",children:m?.instructions?.length?t.jsx("div",{className:"mx-4 my-3 line-clamp-4",children:m.instructions}):t.jsxs("div",{className:"text-token-text-secondary flex h-full w-full items-center px-4 py-3",children:[t.jsx("div",{className:"flex-1",children:t.jsx(j,{...y.addCustomInstructions})}),t.jsx(yt,{className:"icon-sm"})]})})}),u.includes($s.GizmoInstructionsTooLong)?t.jsx(Ts,{className:"mt-1",children:t.jsx(j,{...y.instructionsTooLong,values:{length:ft}})}):null]}),r&&t.jsx(zs,{gizmo:e,onClose:()=>{c(!1)}}),t.jsx(Pa,{gizmoId:e.gizmo.id,gizmoName:e.gizmo.display.name,canEdit:$,gizmoEditorData:m,openFileDialog:L,pendingFiles:f,pendingFileUpsertMutationsRef:p,setVersion:v,currentModelConfig:h}),R&&t.jsxs(jt,{children:[t.jsx(qs,{}),t.jsx("h3",{children:t.jsx(j,{...y.dragInstructions})}),t.jsx("h4",{className:"w-2/3 text-center",children:k.length>0?k.join(", "):t.jsx(j,{...y.dragAllAccepted})})]}),G&&t.jsxs(jt,{children:[t.jsx(To,{className:"icon-2xl"}),t.jsx("h3",{children:t.jsx(j,{...y.dragTooManyFiles})}),t.jsx("h4",{className:"w-2/3 text-center",children:t.jsx(j,{...y.dragTooManyFilesDescription,values:{maxFileLimit:a}})})]})]})});function Fa({gizmo:s,onClose:e}){const n=_.useRef(null),o=_.useCallback(()=>{n.current?.openFileDialog()},[n]),i=E(),a=Do(i),{canEdit:l}=Ce(s);return t.jsx(t.Fragment,{children:t.jsx(Qe,{testId:"modal-project-files",className:"min-h-72 max-w-[820px]",isOpen:!0,showCloseButton:!0,hideSeparator:!0,noPadding:!0,size:"custom",type:"success",headerAccessory:l&&t.jsx(re,{color:"secondary",onClick:o,children:t.jsx(j,{...y.addFilesButtonLabel})}),title:t.jsx(j,{...y.projectFilesModalTitle}),onClose:()=>{e()},children:t.jsx("div",{className:"grid min-h-[50dvh] grow overflow-y-auto pt-0",children:a&&t.jsx(Ga,{ref:n,gizmo:s,showInstructions:!1,accountPlanType:a.planType})})})})}function Ea({gizmo:s}){return t.jsx("div",{className:"mt-6 grid grid-cols-2 items-start",children:s?t.jsxs(t.Fragment,{children:[t.jsx(Da,{gizmo:s,className:"rounded-[20px_0px_0px_20px] [border-width:1px_0.5px_1px_1px]"}),t.jsx(Oa,{gizmo:s,className:"rounded-[0px_20px_20px_0px] [border-width:1px_1px_1px_0.5px]"})]}):t.jsxs(t.Fragment,{children:[t.jsx(Zt,{}),t.jsx(Zt,{})]})})}function At({className:s,header:e,context:n,contextClassName:o="",icon:i,modal:a,onClick:l,disabled:r=!1,isModalOpen:c=!1}){return t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:l,disabled:r,className:U("group/snorlax-control-tile border-token-border-light bg-token-bg-primary hover:bg-token-bg-tertiary active:bg-token-bg-tertiary relative h-full rounded-2xl border disabled:pointer-events-none disabled:opacity-50",s),children:t.jsxs("div",{className:"relative mx-5 my-4 flex items-center justify-between gap-3 overflow-hidden",children:[t.jsxs("div",{className:"w-full grow text-start",children:[t.jsx("div",{className:"text-sm font-medium",children:e}),t.jsx("div",{className:U("text-token-text-secondary text-xs",o),children:n})]}),i]})}),c&&a]})}function Zt(){return t.jsx(At,{disabled:!0,header:t.jsx("div",{className:"bg-token-bg-tertiary my-2 h-2 w-48 rounded-full"}),context:t.jsx("div",{className:"bg-token-bg-tertiary my-2 h-2 w-32 rounded-full contain-inline-size"})})}function Da({className:s,gizmo:e}){const{files:n}=e,o=!n.length,[i,a]=_.useState(!1),l=i&&t.jsx(Fa,{gizmo:e,onClose:()=>{a(!1)}}),r=()=>a(!0);let c,d,m;const{canEdit:u}=Ce(e);if(o)c=t.jsx(j,{...u?y.addFilesButtonLabel:y.viewFilesButtonLabel}),d=t.jsx(j,{...u?y.filesControlDescription:y.noFilesReadOnlyDescription}),m=null;else{const h=n.slice(0,3);c=t.jsx(j,{...y.projectFilesModalTitle}),d=t.jsx(j,{...y.filesCount,values:{count:n.length}}),m=t.jsx("div",{className:"relative flex h-10 w-20 shrink-0 items-center justify-center rounded-full max-sm:sr-only",children:h.toReversed().map((g,b)=>t.jsx(Aa,{file:g,index:b,gizmoId:e.gizmo.id},g.id))})}return t.jsx(At,{className:s,isModalOpen:i,modal:l,onClick:r,header:c,context:d,icon:m,disabled:o&&!u})}function Aa({file:s,index:e,gizmoId:n}){const o=s.name,a=Ao(o)&&s.file_id!=null&&t.jsx(Ks,{fileName:o,fileId:s.file_id,gizmoId:n,className:"[box-shadow:0px_4px_16px_0px_rgba(0,0,0,0.05)]"});return t.jsx("div",{className:"border-token-bg-primary group-hover/snorlax-control-tile:border-token-bg-tertiary absolute end-0 top-0 h-10 w-10 overflow-hidden rounded-xl border-2",style:{transform:`translateX(${e*-20}px)`},children:a||t.jsx(Xs,{className:"h-9 w-9 shrink-0 [box-shadow:0px_4px_16px_0px_rgba(0,0,0,0.05)]",filename:s.name,contextConnectorInfo:void 0})})}function Oa({gizmo:s,className:e}){const{instructions:n}=s.gizmo,o=!n.length,[i,a]=_.useState(!1),l=i&&t.jsx(zs,{gizmo:s,onClose:()=>{a(!1)}}),r=()=>a(!0);let c,d,m,u;const{canEdit:x}=Ce(s);return o?(c=t.jsx(j,{...x?y.customInstructionsTitle:y.customInstructionsReadOnlyTitle}),d=t.jsx(j,{...x?y.customInstructionsDescription:y.customInstructionsReadOnlyDescription})):(c=t.jsx(j,{...y.editCustomInstructionsTitle}),u="overflow-hidden text-ellipsis whitespace-nowrap",d=n),t.jsx(At,{className:e,isModalOpen:i,modal:l,onClick:r,header:c,context:d,icon:m,contextClassName:u,disabled:o&&!x})}const La=()=>t.jsx("div",{className:"ms-1 mt-3 h-10",children:t.jsx("div",{className:"bg-token-tertiary my-[15px] h-[10px] w-48 rounded-full"})}),Yt=new Map;function Ra(s){const e=Yt.get(s);if(e)return e;const n=ln(Ua,2e3,{trailing:!0});return Yt.set(s,n),n}async function Ua({gizmoId:s,upsertProjectMutation:e,toaster:n}){const o=un,i=$t(o.getState(),"theme",s);try{i!==void 0&&await e.mutateAsync({id:s,update:{theme:i??void 0}}),$t(o.getState(),"theme",s)===i&&mn(s,"theme")}catch(a){const l=Nt(a);n.warning(l??"Error",{duration:2})}}function Ba({gizmoId:s,theme:e,upsertProjectMutation:n,toaster:o}){rn(s,"theme",e),Ra(s)({gizmoId:s,upsertProjectMutation:n,toaster:o})}function Ha(s){"use forget";const e=W.c(15),{gizmo:n}=s,o=is(n),i=Xe(),[a,l]=_.useState(!1),r=Je();let c;e[0]!==o||e[1]!==n||e[2]!==r||e[3]!==i?(c=g=>{g!==o&&(B.logEventWithStatsig("Projects: Theme Change","chatgpt_web_projects_theme_change",{theme:g??"default"}),Ba({gizmoId:n.gizmo.id,theme:g,upsertProjectMutation:i,toaster:r}))},e[0]=o,e[1]=n,e[2]=r,e[3]=i,e[4]=c):c=e[4];const d=c;let m;e[5]===Symbol.for("react.memo_cache_sentinel")?(m=g=>l(g),e[5]=m):m=e[5];let u;e[6]!==o?(u=t.jsx(os,{currentTheme:o}),e[6]=o,e[7]=u):u=e[7];let x;e[8]!==o||e[9]!==d?(x=t.jsx(on,{currentTheme:o,onSelect:d}),e[8]=o,e[9]=d,e[10]=x):x=e[10];let h;return e[11]!==a||e[12]!==u||e[13]!==x?(h=t.jsx(an,{open:a,sideOffset:4,alignOffset:7,side:"bottom",alignAgainstAnchor:"start",size:"none",modal:!0,onOpenChange:m,triggerButton:u,children:x}),e[11]=a,e[12]=u,e[13]=x,e[14]=h):h=e[14],h}function $a(s){"use forget";const e=W.c(3),{gizmo:n}=s,o=H();let i;return e[0]!==n||e[1]!==o?(i=t.jsx("div",{className:"mb-8 inline-flex gap-2 self-center",children:n?t.jsxs("div",{className:"text-page-header mt-0.5 inline-block px-4 text-center",children:[n?t.jsx(Ha,{gizmo:n}):t.jsx(os,{disabled:!0,currentTheme:null}),t.jsx("h1",{className:"contents",children:t.jsx("a",{href:"#edit-title",role:"button","aria-label":o.formatMessage({id:"edit-title",defaultMessage:"Edit the title of {projectName}"},{projectName:n.gizmo.display.name}),className:"text-page-header group hover:text-token-text-secondary relative ms-2 text-balance",onClick:qa,children:n.gizmo.display.name})})]}):t.jsx(La,{})}),e[0]=n,e[1]=o,e[2]=i):i=e[2],i}function qa(s){s.preventDefault(),_t.setShowProjectSettingsModal(!0)}function Wa(s){"use forget";const e=W.c(2),{children:n}=s;let o;return e[0]!==n?(o=t.jsx("div",{className:"group relative flex flex-col gap-1 p-4",children:t.jsx("div",{className:"flex items-center gap-4",children:n})}),e[0]=n,e[1]=o):o=e[1],o}function Va(s){"use forget";const e=W.c(23),{conversation:n,gizmo:o}=s,i=Ms(n.id,Ka)??n.title,[a,l]=_.useState(!1);let r,c;e[0]!==n.id?(r=()=>Bo(rs,{editTitleInMainScreen:f=>{const{serverThreadId:p}=f;p===n.id&&l(!0)}}),c=[n.id],e[0]=n.id,e[1]=r,e[2]=c):(r=e[1],c=e[2]),_.useEffect(r,c);const{snippet:d}=n;let m;e[3]!==n||e[4]!==i||e[5]!==a?(m=a?t.jsx(cn,{conversationId:n.id,historyConversationResponse:n,onClose:()=>{l(!1)}}):t.jsx("div",{className:"text-sm font-medium",children:i}),e[3]=n,e[4]=i,e[5]=a,e[6]=m):m=e[6];let u;e[7]!==d?(u=d&&t.jsx("div",{className:"text-token-text-secondary truncate text-sm",children:d}),e[7]=d,e[8]=u):u=e[8];let x;e[9]!==m||e[10]!==u?(x=t.jsxs("div",{className:"grow overflow-hidden group-hover:me-5",children:[m,u]}),e[9]=m,e[10]=u,e[11]=x):x=e[11];let h;e[12]!==n||e[13]!==a?(h=!a&&t.jsx(Xa,{conversation:n}),e[12]=n,e[13]=a,e[14]=h):h=e[14];let g;e[15]!==x||e[16]!==h?(g=t.jsxs(Wa,{children:[x,h]}),e[15]=x,e[16]=h,e[17]=g):g=e[17];const b=g;let v;return e[18]!==b||e[19]!==n.id||e[20]!==o||e[21]!==a?(v=a?b:t.jsx(Qt,{to:dn(n.id,o),draggable:!1,children:b}),e[18]=b,e[19]=n.id,e[20]=o,e[21]=a,e[22]=v):v=e[22],v}function Ka(s){return s?.title}function Xa(s){"use forget";const e=W.c(10),{conversation:n}=s,[o,i]=_.useState(!1),a=o?"flex":"hidden group-hover:flex";let l;e[0]!==a?(l=U("absolute end-0 top-0 bottom-0 items-center gap-1.5 pe-4",a),e[0]=a,e[1]=l):l=e[1];let r;e[2]!==n?(r=m=>{i(m),m&&B.logEvent("Conversation History Item Open Menu",{conversationId:n.id})},e[2]=n,e[3]=r):r=e[3];let c;e[4]!==n||e[5]!==r?(c=t.jsx(fn,{conversation:n,onOpenChange:r,inMainScreen:!0,isActiveConversation:!1}),e[4]=n,e[5]=r,e[6]=c):c=e[6];let d;return e[7]!==l||e[8]!==c?(d=t.jsx("div",{className:l,onClick:Za,children:c}),e[7]=l,e[8]=c,e[9]=d):d=e[9],d}function Za(s){s.preventDefault()}function Ya(s){"use forget";const e=W.c(19),{gizmo:n}=s;nn(n.gizmo.id);const{items:o,hasNextPage:i,fetchNextPage:a,isLoading:l,isFetching:r,isFetchingNextPage:c}=as(n.gizmo.id),d=_.useRef(null);let m;e[0]!==i||e[1]!==r||e[2]!==l||e[3]!==a?(m=p=>{l||p==null||(d.current?.disconnect(),d.current=new IntersectionObserver(C=>{C[0].isIntersecting&&i&&!r&&a()}),d.current.observe(p))},e[0]=i,e[1]=r,e[2]=l,e[3]=a,e[4]=m):m=e[4];const u=m;let x,h;e[5]===Symbol.for("react.memo_cache_sentinel")?(x=()=>()=>{d.current?.disconnect()},h=[],e[5]=x,e[6]=h):(x=e[5],h=e[6]),_.useEffect(x,h);const g=o.length;let b;e[7]!==g||e[8]!==n||e[9]!==i||e[10]!==u||e[11]!==l||e[12]!==o?(b=(g||l)&&t.jsx(Ja,{gizmo:n,items:o??[],hasNextPage:i,infiniteScrollTriggerElementRef:u}),e[7]=g,e[8]=n,e[9]=i,e[10]=u,e[11]=l,e[12]=o,e[13]=b):b=e[13];let v;e[14]!==c?(v=c&&t.jsx("div",{className:"m-4 mb-5 flex justify-center",children:t.jsx(Cs,{})}),e[14]=c,e[15]=v):v=e[15];let f;return e[16]!==b||e[17]!==v?(f=t.jsxs("div",{className:"mt-6 mb-14 contain-inline-size",children:[b,v]}),e[16]=b,e[17]=v,e[18]=f):f=e[18],f}function Ja(s){"use forget";const e=W.c(14),{gizmo:n,items:o,hasNextPage:i,infiniteScrollTriggerElementRef:a}=s,l=o.length;let r;if(e[0]!==l||e[1]!==n||e[2]!==i||e[3]!==a||e[4]!==o){let d;e[6]!==l||e[7]!==n||e[8]!==i||e[9]!==a||e[10]!==o.length?(d=(m,u)=>{const x=i&&u===o.length-3?a:void 0;return t.jsx("li",{ref:x,className:U("hover:bg-token-bg-tertiary first:rounded-t-lg last:rounded-b-lg",u!==l-1&&"border-token-border-xlight border-b"),children:t.jsx(Va,{conversation:m,gizmo:n})},m.id)},e[6]=l,e[7]=n,e[8]=i,e[9]=a,e[10]=o.length,e[11]=d):d=e[11],r=o.map(d),e[0]=l,e[1]=n,e[2]=i,e[3]=a,e[4]=o,e[5]=r}else r=e[5];let c;return e[12]!==r?(c=t.jsx(t.Fragment,{children:t.jsx("ol",{children:r})}),e[12]=r,e[13]=c):c=e[13],c}function Ot(s,e){"use forget";const n=W.c(14),o=Zs(),i=E(),a=ne(),l=ss(),r=We.useStore(),c=o?.kind==="conversation"&&o.gizmoId!==e;let d;n[0]!==a||n[1]!==r||n[2]!==l?(d=async function(b){const{conversation:v,newGizmoId:f,previousGizmoId:p}=b;r.expandProject(f),await l({newGizmoId:f,conversation:v,previousGizmoId:p}),a(`/g/${f}/project`)},n[0]=a,n[1]=r,n[2]=l,n[3]=d):d=n[3];const m=d;let u;n[4]!==m||n[5]!==c||n[6]!==i||n[7]!==o||n[8]!==e||n[9]!==s?(u=()=>{if(!c)return;const{conversation:g,gizmoId:b}=o;if(e)return m({conversation:g,newGizmoId:e,previousGizmoId:b});et(i,v=>{const{onClose:f}=v;return t.jsx(Mt,{onClose:f,onSuccess:p=>{if(!p)return;const C=m({conversation:g,newGizmoId:p,previousGizmoId:b});return B.logEventWithStatsig("Projects: Create Open","chatgpt_web_projects_create_open",{source:s}),C}})})},n[4]=m,n[5]=c,n[6]=i,n[7]=o,n[8]=e,n[9]=s,n[10]=u):u=n[10];const x=u;let h;return n[11]!==c||n[12]!==x?(h={canDropConversation:c,onDropConversation:x},n[11]=c,n[12]=x,n[13]=h):h=n[13],h}function Qa(s){"use forget";const e=W.c(48),{clientThreadId:n,gizmoId:o,currentModelId:i,onRequestCompletion:a}=s,l=H(),{data:r}=Ct(o),c=_.useContext(Oo),d=Lo(c),m=Ro(Uo),u=Ht(ni),x=Ht(si),{onDropConversation:h,canDropConversation:g}=Ot(void 0,o),[b,v]=_.useState(!1);let f;e[0]!==g?(f=P=>{P.preventDefault(),g&&v(!0)},e[0]=g,e[1]=f):f=e[1];let p;e[2]!==g||e[3]!==h?(p=P=>{P.preventDefault(),g&&(v(!1),h())},e[2]=g,e[3]=h,e[4]=p):p=e[4];let C,M;e[5]!==g?(C=P=>{P.preventDefault(),g&&v(!0)},M=P=>{P.preventDefault(),g&&v(!1)},e[5]=g,e[6]=C,e[7]=M):(C=e[6],M=e[7]);const w=d?"last-standard":"none",I=m?"none":"standard";let k;e[8]!==r?(k=t.jsx($a,{gizmo:r}),e[8]=r,e[9]=k):k=e[9];let N;e[10]!==n||e[11]!==i||e[12]!==r||e[13]!==a?(N=r?t.jsx(Sa,{clientThreadId:n,isNewThread:!0,currentModelId:i,onContinueGenerating:P=>a(en(P)),onRequestCompletion:async P=>a(await Qs(P)),hideHeader:!0}):t.jsx("div",{className:"bg-token-tertiary h-24 w-full rounded-3xl"}),e[10]=n,e[11]=i,e[12]=r,e[13]=a,e[14]=N):N=e[14];let $,L;e[15]!==r?(L=t.jsx(Ea,{gizmo:r}),$=r&&t.jsx(Ya,{gizmo:r}),e[15]=r,e[16]=$,e[17]=L):($=e[16],L=e[17]);let D;e[18]!==r||e[19]!==o||e[20]!==x?(D=r&&x&&t.jsx(Ys,{gizmo:Js(r),publishedGizmo:r,onClose:ti},o),e[18]=r,e[19]=o,e[20]=x,e[21]=D):D=e[21];let T;e[22]!==r||e[23]!==o||e[24]!==l||e[25]!==u?(T=u&&t.jsx(Mt,{submitButtonTitle:l.formatMessage(y.projectSettingsSubmitButton),gizmo:r,onClose:ei},o),e[22]=r,e[23]=o,e[24]=l,e[25]=u,e[26]=T):T=e[26];let R;e[27]!==r?.gizmo||e[28]!==b?(R=b&&t.jsxs(jt,{children:[t.jsx(ns,{className:"h-12 w-12",style:{color:"#3C46FF"}}),t.jsx("h3",{className:"text-center",children:t.jsx(j,{...y.addConversationToNamedSnorlax,values:{projectName:r?.gizmo.display.name??"project"}})}),t.jsx("h4",{className:"text-center",children:t.jsx(j,{...y.moveConversation})})]}),e[27]=r?.gizmo,e[28]=b,e[29]=R):R=e[29];let G;e[30]!==$||e[31]!==D||e[32]!==T||e[33]!==R||e[34]!==k||e[35]!==N||e[36]!==L?(G=t.jsxs(tn,{column:!0,shouldRemoveGap:!0,className:"[width:min(90cqw,var(--thread-content-max-width))]",children:[k,N,L,$,D,T,R]}),e[30]=$,e[31]=D,e[32]=T,e[33]=R,e[34]=k,e[35]=N,e[36]=L,e[37]=G):G=e[37];let z;e[38]!==G||e[39]!==w||e[40]!==I?(z=t.jsx(sn,{verticalMargin:"none",verticalPadding:w,horizontalPadding:I,children:G}),e[38]=G,e[39]=w,e[40]=I,e[41]=z):z=e[41];let O;return e[42]!==f||e[43]!==z||e[44]!==p||e[45]!==C||e[46]!==M?(O=t.jsx("div",{onDragOver:f,onDrop:p,onDragEnter:C,onDragLeave:M,className:"flex max-h-full min-h-full flex-col pt-(--header-height)",children:z}),e[42]=f,e[43]=z,e[44]=p,e[45]=C,e[46]=M,e[47]=O):O=e[47],O}function ei(){_t.setShowProjectSettingsModal(!1)}function ti(){_t.setShowShareModal(!1)}function si(s){return s.showShareModal}function ni(s){return s.showProjectSettingsModal}const oi=Object.freeze(Object.defineProperty({__proto__:null,SnorlaxSplashScreen:Qa,useProjectsDragDrop:Ot},Symbol.toStringTag,{value:"Module"})),ai=ze(()=>Pe(()=>import("./hb15k43bxae6bvdr.js"),__vite__mapDeps([0,1,2,3,4])).then(s=>s.SnorlaxFolderAnimation),{loading:({color:s})=>t.jsx(Lt,{color:s})}),ii={open:{opacity:1,y:0,transition:{duration:.15,ease:"easeOut"}},closed:{opacity:0,y:-5,transition:{duration:.15,ease:"easeIn"}}};function ri(s){"use forget";const e=W.c(19),{color:n,folderState:o,gizmoId:i,sidebarSnorlaxFolderStore:a}=s,l=H(),[r,c]=_.useState(!1);let d;e[0]!==o||e[1]!==l?(d=o==="open"?l.formatMessage(y.hideChatsForProjectTooltip):l.formatMessage(y.showChatsForProjectTooltip),e[0]=o,e[1]=l,e[2]=d):d=e[2];let m;e[3]!==o||e[4]!==i||e[5]!==a?(m=f=>{f.preventDefault(),o==="open"?a.collapseProject(i):a.expandProject(i)},e[3]=o,e[4]=i,e[5]=a,e[6]=m):m=e[6];let u,x;e[7]===Symbol.for("react.memo_cache_sentinel")?(u=()=>{c(!0)},x=()=>{c(!1)},e[7]=u,e[8]=x):(u=e[7],x=e[8]);const h=o==="open";let g;e[9]!==n||e[10]!==r||e[11]!==h?(g=t.jsx(ai,{isOpen:h,isHovered:r,color:n}),e[9]=n,e[10]=r,e[11]=h,e[12]=g):g=e[12];let b;e[13]!==m||e[14]!==g?(b=t.jsx("button",{className:"icon",onClick:m,onMouseEnter:u,onMouseLeave:x,children:g}),e[13]=m,e[14]=g,e[15]=b):b=e[15];let v;return e[16]!==d||e[17]!==b?(v=t.jsx(le,{label:d,triggerAs:null,children:b}),e[16]=d,e[17]=b,e[18]=v):v=e[18],v}function Lt(s){"use forget";const e=W.c(2),{color:n}=s;let o;return e[0]!==n?(o=t.jsx(gt,{className:"icon",style:{color:n}}),e[0]=n,e[1]=o):o=e[1],o}function ir(s){"use forget";const e=W.c(110),{gizmo:n,historyDisabled:o,flair:i,onClick:a,isActive:l,hideOverflowMenu:r,inGPTDropdown:c}=s,d=r===void 0?!1:r,m=c===void 0?!1:c,u=E(),{clientThreadId:x}=Dt(),h=kt(x),g=ne(),b=H();let v;e[0]!==u?(v=_s(u),e[0]=u,e[1]=v):v=e[1];const f=v,p=n.gizmo.id,C=We.useStore();let M;e[2]!==p?(M=F=>We.selectFolderState(F,p),e[2]=p,e[3]=M):M=e[3];const w=We.useState(M);let I;e[4]!==n.gizmo.tags?(I=n.gizmo.tags?.includes(ls.FirstParty),e[4]=n.gizmo.tags,e[5]=I):I=e[5];const k=!!I,{items:N,hasNextPage:$}=as(n.gizmo.id);let L;e[6]!==N?(L=N===void 0?[]:N,e[6]=N,e[7]=L):L=e[7];const D=L,T=Ze(p),R=is(n);let G;e[8]!==p||e[9]!==f.projects?(G=()=>f.projects.renamingProjectId$()===p,e[8]=p,e[9]=f.projects,e[10]=G):G=e[10];const z=Tt(G),O=E();let P;e[11]!==O?(P=se(O,"3925590552"),e[11]=O,e[12]=P):P=e[12];const oe=P,A=l&&(!T||!(w==="open"&&h)),Y=_.useRef(w);let J,Z;e[13]!==w?(J=()=>{Y.current=w},Z=[w],e[13]=w,e[14]=J,e[15]=Z):(J=e[14],Z=e[15]),_.useEffect(J,Z);let V,Me;e[16]!==p||e[17]!==l||e[18]!==h||e[19]!==C?(V=()=>{Y.current!=="open"&&l&&h&&C.expandProject(p)},Me=[l,h,C,p],e[16]=p,e[17]=l,e[18]=h,e[19]=C,e[20]=V,e[21]=Me):(V=e[20],Me=e[21]),_.useEffect(V,Me);let K;if(n!=null)K=n.gizmo.display.name||gn;else if(o){let F;e[22]!==b?(F=b.formatMessage(cs.clearChat),e[22]=b,e[23]=F):F=e[23],K=F}else K=jn;const[_e,Ut]=_.useState();let Ee;e[24]!==u?(Ee=Ho(u),e[24]=u,e[25]=Ee):Ee=e[25];const nt=Ee;let De;e[26]===Symbol.for("react.memo_cache_sentinel")?(De=()=>{Ut(void 0)},e[26]=De):De=e[26];let Ae;e[27]!==n?(Ae=[n],e[27]=n,e[28]=Ae):Ae=e[28],_.useEffect(De,Ae);const ot=Xe(),[ae,at]=_.useState(!1),{canDropConversation:ce,onDropConversation:it}=Ot("sidebar_row_button",p);let Oe;e[29]!==f.composer||e[30]!==f.projects?(Oe=()=>{_.startTransition(()=>{Kt(()=>{f.composer.reset(),f.projects.reset()})})},e[29]=f.composer,e[30]=f.projects,e[31]=Oe):Oe=e[31];const Le=Oe;let Re;e[32]!==Le||e[33]!==u||e[34]!==n.gizmo.id||e[35]!==l||e[36]!==z||e[37]!==K||e[38]!==g||e[39]!==_e||e[40]!==ot?(Re=z?t.jsx(vn,{initialValue:K,onCommit:async F=>{Ut(F),Le();const{resource:we}=await ot.mutateAsync({update:{name:F},id:n.gizmo.id});we&&l&&g(Ve(u,we),{replace:!0})},onCancel:Le}):_e??K,e[32]=Le,e[33]=u,e[34]=n.gizmo.id,e[35]=l,e[36]=z,e[37]=K,e[38]=g,e[39]=_e,e[40]=ot,e[41]=Re):Re=e[41];const rt=Re,lt=m&&!T?S.LinkItem:xn,ct=ae&&"[&>*]:pointer-events-none";let de;e[42]!==ct?(de=U(ct),e[42]=ct,e[43]=de):de=e[43];let ue;e[44]!==ce||e[45]!==it?(ue=F=>{ce&&(F.preventDefault(),F.stopPropagation(),at(!1),it())},e[44]=ce,e[45]=it,e[46]=ue):ue=e[46];let me;e[47]!==ce||e[48]!==T?(me=F=>{ce&&F.target===F.currentTarget&&T&&(F.preventDefault(),at(!0))},e[47]=ce,e[48]=T,e[49]=me):me=e[49];let Ue;e[50]===Symbol.for("react.memo_cache_sentinel")?(Ue=F=>{F.target===F.currentTarget&&at(!1)},e[50]=Ue):Ue=e[50];let fe;e[51]!==u||e[52]!==n?(fe=Ve(u,n),e[51]=u,e[52]=n,e[53]=fe):fe=e[53];let ge;e[54]!==p||e[55]!==f.composer||e[56]!==f.projects.renamingProjectId$?(ge=()=>{Kt(()=>{f.projects.renamingProjectId$.set(p),f.composer.autofocusDisabled$.set(!0)})},e[54]=p,e[55]=f.composer,e[56]=f.projects.renamingProjectId$,e[57]=ge):ge=e[57];let xe;e[58]!==n.gizmo.id||e[59]!==a?(xe=F=>{const we=n?.gizmo.id??"primary";B.logNewChatButtonClicked({location:"Sidebar gizmo list",gizmo_id:we}),B.logEvent("Sidebar Click Gizmo",{gizmo_id:we}),a?.(F)},e[58]=n.gizmo.id,e[59]=a,e[60]=xe):xe=e[60];let he;e[61]!==R||e[62]!==w||e[63]!==p||e[64]!==n.gizmo.display||e[65]!==k||e[66]!==T||e[67]!==C||e[68]!==D?(he=T&&D.length>0?t.jsx(ri,{color:R,folderState:w,gizmoId:p,sidebarSnorlaxFolderStore:C}):T?t.jsx(Lt,{color:R}):t.jsx(ds,{simple:!0,isFirstParty:k,src:n?.gizmo.display.profile_picture_url,className:"icon",alt:""}),e[61]=R,e[62]=w,e[63]=p,e[64]=n.gizmo.display,e[65]=k,e[66]=T,e[67]=C,e[68]=D,e[69]=he):he=e[69];let pe;e[70]!==i?(pe=i===us.Workspace&&t.jsx(li,{}),e[70]=i,e[71]=pe):pe=e[71];let je;e[72]!==i||e[73]!==n||e[74]!==d||e[75]!==m||e[76]!==l||e[77]!==z||e[78]!==oe||e[79]!==T||e[80]!==nt||e[81]!==ae?(je=!d&&!ae&&!z&&(T?t.jsx(di,{gizmoResource:n,isActive:l}):oe?t.jsx(le,{label:m?t.jsx(j,{id:"BCd1DP",defaultMessage:"Pin to sidebar"}):t.jsx(j,{id:"G+A62m",defaultMessage:"Unpin from sidebar"}),side:"right",children:t.jsx(zt,{onClick:()=>{ke.updateGizmoSidebar(nt,ms,n.gizmo.id,m?"keep":"hide","sidebar")},icon:m?bn:Sn})}):t.jsx(ci,{gizmoResource:n,flair:i})),e[72]=i,e[73]=n,e[74]=d,e[75]=m,e[76]=l,e[77]=z,e[78]=oe,e[79]=T,e[80]=nt,e[81]=ae,e[82]=je):je=e[82];let ve;e[83]!==lt||e[84]!==rt||e[85]!==A||e[86]!==ae||e[87]!==de||e[88]!==ue||e[89]!==me||e[90]!==fe||e[91]!==ge||e[92]!==xe||e[93]!==he||e[94]!==pe||e[95]!==je?(ve=t.jsx(lt,{className:de,highlighted:ae,onDrop:ue,onDragEnter:me,onDragLeave:Ue,to:fe,onDoubleClick:ge,onClick:xe,active:A,icon:he,label:rt,trailing:pe,highlightTrailing:je}),e[83]=lt,e[84]=rt,e[85]=A,e[86]=ae,e[87]=de,e[88]=ue,e[89]=me,e[90]=fe,e[91]=ge,e[92]=xe,e[93]=he,e[94]=pe,e[95]=je,e[96]=ve):ve=e[96];let be;e[97]!==w||e[98]!==n||e[99]!==$||e[100]!==T||e[101]!==h||e[102]!==A||e[103]!==D?(be=T&&w==="open"&&D.length>0&&t.jsx(es.div,{initial:"closed",animate:"open",exit:"closed",variants:ii,className:"overflow-hidden",children:t.jsx(hn,{gizmoResource:n,serverThreadId:h,isOnProjectPage:A,conversations:D,hasNextPage:$})},"nested-conversations"),e[97]=w,e[98]=n,e[99]=$,e[100]=T,e[101]=h,e[102]=A,e[103]=D,e[104]=be):be=e[104];let Se;e[105]!==be?(Se=t.jsx(Ls,{initial:!1,children:be}),e[105]=be,e[106]=Se):Se=e[106];let Be;return e[107]!==ve||e[108]!==Se?(Be=t.jsxs(t.Fragment,{children:[ve,Se]}),e[107]=ve,e[108]=Se,e[109]=Be):Be=e[109],Be}const li=()=>{const s=H(),e=ws(),n=e?.name?s.formatMessage({id:"gizmo.workspaceRecommended",defaultMessage:"Recommended at {workspace_name}"},{workspace_name:e.name??"Your Workspace"}):s.formatMessage({id:"gizmo.workspaceRecommended.noWorkplaceName",defaultMessage:"Recommended at your workplace"});return t.jsx(le,{side:"right",label:n,children:t.jsx(pn,{className:"icon",alt:n})})},Ps=ze(()=>Pe(()=>import("./k8bi9d63xvcw374i.js"),__vite__mapDeps([5,1,2,3,6,7])).then(s=>s.GizmoKeepInSidebarMenuItem)),ci=s=>{"use forget";const e=W.c(10),{gizmoResource:n,flair:o}=s,i=vt();let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=t.jsx(zt,{onMouseOver:ui,icon:Pt}),e[0]=a):a=e[0];let l;e[1]!==o||e[2]!==n||e[3]!==i?(l=o===us.Recent&&t.jsx(S.Item,{onClick:()=>{ke.updateGizmoSidebar(i,ms,n.gizmo.id,"keep","sidebar")},children:t.jsx(j,{...cs.keepInSidebar})}),e[1]=o,e[2]=n,e[3]=i,e[4]=l):l=e[4];let r;e[5]!==n?(r=t.jsx(Ps,{gizmoResource:n,location:"sidebar"}),e[5]=n,e[6]=r):r=e[6];let c;return e[7]!==l||e[8]!==r?(c=t.jsxs(Ge,{triggerButton:a,contentAlign:"start",sideOffset:-4,alignOffset:-8,size:"auto",children:[l,r]}),e[7]=l,e[8]=r,e[9]=c):c=e[9],c},di=s=>{"use forget";const e=W.c(24),{gizmoResource:n,isActive:o}=s,i=E(),a=ne();let l;e[0]!==i?(l=_s(i),e[0]=i,e[1]=l):l=e[1];const r=l,{canEdit:c}=Ce(n),{canDelete:d}=$o(n);let m;e[2]===Symbol.for("react.memo_cache_sentinel")?(m=t.jsx(zt,{icon:Pt}),e[2]=m):m=e[2];let u;e[3]!==n.gizmo.id||e[4]!==r.composer.autofocusDisabled$||e[5]!==r.projects.renamingProjectId$?(u=()=>{r.composer.autofocusDisabled$.set(!0),r.projects.renamingProjectId$.set(n.gizmo.id)},e[3]=n.gizmo.id,e[4]=r.composer.autofocusDisabled$,e[5]=r.projects.renamingProjectId$,e[6]=u):u=e[6];const x=!c;let h,g;e[7]===Symbol.for("react.memo_cache_sentinel")?(h=t.jsx(yt,{className:"icon-sm"}),g=t.jsx(j,{...y.editProjectNameDropdownButton}),e[7]=h,e[8]=g):(h=e[7],g=e[8]);let b;e[9]!==u||e[10]!==x?(b=t.jsxs(S.Item,{onClick:u,disabled:x,children:[h,g]}),e[9]=u,e[10]=x,e[11]=b):b=e[11];let v;e[12]!==i||e[13]!==n.gizmo.id||e[14]!==o||e[15]!==a?(v=w=>{w.preventDefault(),w.stopPropagation();const I=function(N){N(),o&&a("/")};et(i,k=>{const{onClose:N}=k;return t.jsx(yn,{gizmoId:n.gizmo.id,onError:void 0,onSuccess:()=>I(N),onClose:()=>{N()}})})},e[12]=i,e[13]=n.gizmo.id,e[14]=o,e[15]=a,e[16]=v):v=e[16];const f=!d;let p;e[17]===Symbol.for("react.memo_cache_sentinel")?(p=t.jsx(j,{...y.deleteProjectDropdownButton}),e[17]=p):p=e[17];let C;e[18]!==v||e[19]!==f?(C=t.jsx(S.Item,{color:"danger",onClick:v,icon:fs,disabled:f,children:p}),e[18]=v,e[19]=f,e[20]=C):C=e[20];let M;return e[21]!==C||e[22]!==b?(M=t.jsx(t.Fragment,{children:t.jsxs(Ge,{triggerButton:m,contentAlign:"start",sideOffset:-4,alignOffset:-8,size:"auto",children:[b,C]})}),e[21]=C,e[22]=b,e[23]=M):M=e[23],M};function ui(){return Ps.prefetch()}function mi(s){const e=H(),n=vt(),o=E(),i=qo(o).checkGate("3728943795")&&!s.inSidebarFlyout,{canCreate:a}=Wo(),l=ne(),[r,c]=_.useState(!1),{snorlaxes:d,hasNextPage:m,fetchNextPage:u,isLoading:x,isFetchingNextPage:h,isError:g}=gs(),v=(s.inSidebarFlyout?d.slice(Cn):d).filter(({gizmo:M})=>M.gizmo.id!==s.currentGizmoId),f=v.length===0,p=_.useRef(null),C=_.useCallback(M=>{x||M==null||(p.current?.disconnect(),p.current=new IntersectionObserver(w=>{w[0].isIntersecting&&m&&u()}),p.current.observe(M))},[x,m,u]);return _.useEffect(()=>()=>{p.current?.disconnect()},[]),t.jsxs("div",{ref:f&&!g?C:void 0,children:[f&&x&&t.jsxs(Vo,{children:[t.jsx(S.Shimmer,{}),t.jsx(S.Shimmer,{})]}),f&&g&&t.jsxs("div",{className:"text-token-text-tertiary p-3 text-center italic",children:[e.formatMessage(y.unableToLoadHistory),!r&&t.jsx("div",{className:"mt-1",children:t.jsx(re,{as:"button",color:"primary",size:"small",className:"m-auto mt-2",onClick:()=>{c(!0),Mn(n)},children:e.formatMessage(y.retryLoadingHistory)})})]}),i&&a&&t.jsx(t.Fragment,{children:t.jsx(S.Item,{icon:ns,label:t.jsx(j,{...y.newProjectButton}),onSelect:()=>{et(o,({onClose:M})=>t.jsx(Mt,{onClose:M,onSuccess:async w=>{w&&(await s.onUpdateConversationGizmo(w),l(`/g/${w}/project`))}}))}})}),!x&&!f&&v.map(({gizmo:M},w)=>{const I=w===v.length-1?C:void 0;return t.jsxs(t.Fragment,{children:[i&&w===0&&t.jsx(S.Separator,{}),t.jsx(S.LinkItem,{to:M!=null?Ve(o,M):"/",icon:t.jsx(Lt,{color:M.gizmo.display.theme}),label:M.gizmo.display.name,onClick:()=>{s.inSidebarFlyout||s.onUpdateConversationGizmo(M.gizmo.id)},ref:I},M.gizmo.id)]})}),h&&t.jsxs(t.Fragment,{children:[t.jsx(S.Shimmer,{}),t.jsx(S.Shimmer,{})]})]})}const Jt=ts.memo(mi),fi=ze(()=>Pe(()=>Promise.resolve().then(()=>oi),void 0).then(s=>s.SnorlaxSplashScreen)),rr=({clientThreadId:s,currentModelId:e,onRequestCompletion:n,gizmoId:o})=>{const{data:i}=Ct(o),a=Ze(o),l=Yo();return i==null?null:a?t.jsx(fi,{clientThreadId:s,gizmoId:o,currentModelId:e,onRequestCompletion:n}):t.jsx(Gs,{gizmo:i,showStarterPrompts:!0,disableStarterPrompts:l,clientThreadId:s,currentModelId:e})};function Gs({gizmo:s,hideOwner:e=!1,children:n,className:o,avatarClassName:i,showStarterPrompts:a=!1,disableStarterPrompts:l=!1,clientThreadId:r,currentModelId:c}){return s==null?null:t.jsx(t.Fragment,{children:t.jsxs("div",{className:U("text-token-text-primary flex h-full flex-col items-center justify-center","screen-arch:min-h-[calc(100dvh-var(--thread-leading-height)-var(--thread-trailing-height)-12px)]",o),children:[t.jsx(gi,{gizmo:s,avatarClassName:i}),t.jsx(hi,{gizmo:s,hideOwner:e,showStarterPrompts:a,disableStarterPrompts:l,clientThreadId:r,currentModelId:c}),n]})})}function gi({gizmo:s,avatarClassName:e}){const n=!!(s!=null&&_n(s)&&s?.gizmo.tags?.includes(ls.FirstParty));return t.jsx("div",{className:"relative",children:t.jsx(ds,{isFirstParty:n||!s,src:s!=null&&Ie(s)?s.profilePictureUrl:s?.gizmo.display.profile_picture_url,className:U("mb-3 h-12 w-12",e)})})}function xi({gizmo:s,disabled:e}){const n=ya(s),o=va(),i=Zo();if(n==null||n.length===0)return null;const a=n.slice(0,i?2:4);return t.jsx(ji,{starterPrompts:a,onSelectStarterPrompt:o,disabled:e})}function hi({gizmo:s,hideOwner:e,showStarterPrompts:n,disableStarterPrompts:o,clientThreadId:i,currentModelId:a}){const{data:l}=It(),r=s!=null&&Ie(s)?s.name:s?.gizmo.display.name,c=s!=null&&Ie(s)?s.description:s?.gizmo.display.description,d=s!=null&&Ie(s)?s.defaultModel?l?.models.get(s.defaultModel)??null:null:s?.gizmo.default_model?l?.models.get(s?.gizmo.default_model)??null:null,m=Ko(),u=E(),x=se(u,"1854238036"),h=_.useCallback(()=>{!i||!d||(B.logEvent("GPTs: Landing Preferred Model Switch",{from:a,to:d.id}),Is.logEvent("chatgpt_gpts_landing_preferred_model_switch",d.id,{from:String(a??""),to:d.id}),wn(d.id),m({modelId:d.id,location:"Gizmo landing preferred model"}))},[i,d,a,m]),[g,b]=_.useState(!1);return _.useEffect(()=>{if(!a||d==null||!x||l?.models.get(d.id)==null)return;const v=setTimeout(()=>{b(!0)},500);return()=>clearTimeout(v)},[a,d,l,x]),t.jsxs("div",{className:"flex flex-col items-center gap-2",children:[t.jsx("div",{className:"text-center text-2xl font-semibold",children:r}),!e&&t.jsx("div",{className:"text-token-text-tertiary flex items-center gap-1",children:t.jsx(t.Fragment,{children:s&&Ie(s)?t.jsx(qt,{gizmo:s}):t.jsx(qt,{gizmo:s,socials:s.gizmo.author.display_socials})})}),g&&d&&(a&&a!==d.id?t.jsxs("button",{onClick:h,className:"btn btn-blue btn-small flex items-center gap-1",children:[t.jsx(Xo,{className:"icon-sm"}),t.jsx(j,{id:"6uu9eh",defaultMessage:"Switch to {modelTitle} (creator's recommended model)",values:{modelTitle:`${d.title}`}})]}):t.jsxs("div",{className:"text-token-text-tertiary flex items-center gap-1 text-xs",children:[t.jsx(Ns,{style:{color:"gray",width:16,height:16}}),t.jsx(j,{id:"mcxm8w",defaultMessage:"Using the creator's recommended model: {modelTitle}",values:{modelTitle:`${d.title}`}})]})),c&&t.jsx("div",{className:"text-token-text-primary max-w-md text-center text-sm font-normal",children:c}),n&&t.jsx(xi,{gizmo:s,disabled:o})]})}const pi=/\s/;function ji({starterPrompts:s,onSelectStarterPrompt:e,disabled:n,cssMobileDisplayLimit:o,marginOverride:i}){let a=s.map((l,r)=>{let c=l.oneliner??l.title;c===""&&(c=l.body);const d=pi.test(c);return t.jsxs("button",{className:U(o!==void 0&&r>=o&&"max-sm:hidden","border-token-border-default shadow-xxs enabled:hover:bg-token-main-surface-secondary relative flex w-40 flex-col gap-2 rounded-2xl border px-3 pt-3 pb-4 text-start align-top text-[15px] transition disabled:cursor-not-allowed"),disabled:n,onClick:m=>e(m,l,s,r),children:[t.jsx(In,{category:l.category}),t.jsx("div",{className:U("line-clamp-3 max-w-full text-balance text-gray-600 dark:text-gray-500",d?"break-word":"break-all"),children:c})]},l.id??r)});if(a.length>2){const l=Math.floor(a.length/2);a=[a.slice(0,l),a.slice(l)].map((r,c)=>t.jsx("div",{className:"flex max-w-3xl flex-wrap items-stretch justify-center gap-4",children:r},c))}return t.jsx("div",{className:U("mx-3 flex max-w-3xl flex-wrap items-stretch justify-center gap-4",i??"mt-12"),children:a})}const vi=ze(()=>Pe(()=>import("./k8bi9d63xvcw374i.js"),__vite__mapDeps([5,1,2,3,6,7])).then(s=>s.GizmoKeepInSidebarMenuItem)),bi=4,st=Te.div`font-bold mt-6`,Si=s=>bt({queryFn:async()=>ke.getAbout(s),queryKey:["gizmo","about",{gizmoId:s}]}),yi=s=>bt({queryFn:async()=>ke.getCreatorSlice({creatorId:s}),queryKey:["gizmo","creator",{creatorId:s}],enabled:s!=null}),Ci=s=>{switch(s.type){case ie.BROWSER:return{title:Q.browsing};case ie.PYTHON:return{title:Q.dataAnalysis};case ie.DALLE:return{title:Q.dalle};case ie.IMAGE_GEN:return{title:Q.imageGen};case ie.MEMORY:return{title:Q.memory,description:Q.memoryDescription};case ie.JIT_PLUGIN:return{title:Q.actions,description:Q.actionsDescription};default:return null}},Mi=({tools:s})=>{const e=Gt(),n=e?.includes(Ne.SearchTool)&&!e?.includes(Ne.SearchToolHoldout),o=Nn(s??[],a=>a.type);var i=Qo(o.map(Ci).filter(a=>a!=null)??[]);return i.length===0?null:(n&&(i=i.map(a=>a.title===Q.browsing?{title:Q.search}:a)),t.jsxs("div",{className:"flex flex-col",children:[t.jsx(st,{className:"mb-2",children:t.jsx(j,{id:"gizmo.about.capabilitiesHeader",defaultMessage:"Capabilities"})}),i.map(a=>t.jsxs("div",{className:"flex flex-row items-start gap-2 py-1 text-sm",children:[t.jsx(Ns,{className:"icon-sm mt-0.5 text-green-600"}),t.jsxs("div",{children:[t.jsx(j,{...a.title}),a.description!=null&&t.jsx("div",{className:"text-token-text-tertiary text-xs",children:t.jsx(j,{...a.description})})]})]},a.title.id))]}))},He=Te.div`flex flex-col justify-center items-center gap-2 border-s border-token-border-heavy first:border-0 w-48 mt-4 px-2`,$e=Te.div`flex flex-row items-center gap-1.5 pt-1 text-xl font-semibold text-center leading-none`,qe=Te.div`text-xs text-token-text-tertiary`,_i=({gizmoResource:s})=>t.jsxs(Ge,{contentAlign:"end",sideOffset:4,triggerButton:t.jsx(re,{color:"ghost",icon:Pt}),children:[t.jsx(vi,{gizmoResource:s,location:"about_modal"}),t.jsx(hs,{gizmoResource:s})]}),wi=({aboutBlock:s})=>{switch(s.type){case"generic_title_subtitle":return t.jsxs(He,{children:[t.jsx($e,{children:s.title}),t.jsx(qe,{children:s.subtitle})]});case"rating":return t.jsxs(He,{children:[t.jsxs($e,{children:[t.jsx(ps,{className:"icon-sm"}),s.avg]}),t.jsx(qe,{children:s.count_str})]});case"category":return s.category_ranking!=null?t.jsxs(He,{children:[t.jsx($e,{children:t.jsx(j,{id:"gizmo.about.trendingRank",defaultMessage:"#{rank}",values:{rank:s.category_ranking}})}),t.jsx(qe,{children:t.jsx(j,{id:"gizmo.about.inCategory",defaultMessage:"in {category} {locale}",values:{category:s.category_str,locale:s.category_locale_str??""}})})]}):t.jsxs(He,{children:[t.jsx($e,{children:s.category_str}),t.jsx(qe,{children:t.jsx(j,{id:"gizmo.about.category",defaultMessage:"Category"})})]})}},Ii=({blocks:s})=>t.jsx("div",{className:"flex justify-center",children:s.map(e=>t.jsx(wi,{aboutBlock:e},e.type))}),Ni=({href:s,onClick:e,children:n})=>t.jsx(es.div,{whileTap:{scale:.98},className:"flex",children:t.jsxs(Qt,{to:s,reloadDocument:!0,onClick:e,className:U("group border-token-border-medium bg-token-main-surface-primary hover:bg-token-main-surface-secondary relative ms-2 h-14 min-w-full grow rounded-xl border px-4 focus:outline-hidden"),children:[t.jsx("div",{className:"flex h-full items-center",children:t.jsx("div",{className:"line-clamp-2 text-sm break-all",children:n})}),t.jsx("div",{className:"border-token-border-medium bg-token-main-surface-primary group-hover:bg-token-main-surface-secondary absolute -start-2 -bottom-px h-3 w-4 border-b",children:t.jsx("div",{className:"border-token-border-medium bg-token-main-surface-primary h-3 w-2 rounded-ee-full border-e border-b"})}),t.jsx("div",{className:"absolute end-2 top-0 bottom-0 hidden items-center group-hover:flex",children:t.jsx("div",{className:"bg-token-main-surface-primary flex h-8 w-8 items-center justify-center rounded-lg",children:t.jsx(wt,{className:"icon text-token-text-primary"})})})]})}),ki=({gizmo:s,onClose:e})=>{const n=E(),o=se(n,"1825130190"),i=s.gizmo.display.prompt_starters?.slice(0,bi);return i==null||i.length===0||!o?null:t.jsxs("div",{className:"flex flex-col",children:[t.jsx(st,{children:t.jsx(j,{id:"gizmo.about.conversationStartersHeader",defaultMessage:"Conversation Starters"})}),t.jsx("div",{className:"mt-4 grid grid-cols-2 gap-x-1.5 gap-y-2",children:i.map((a,l)=>t.jsx(Ti,{gizmo:s,prompt:a,onClick:e},l))})]})};function Ti({gizmo:s,prompt:e,onClick:n}){const o=E(),i=Tn(o,s,e);return t.jsx(Ni,{href:i?.toString()??"#",onClick:n,children:e})}const zi=({reviewStats:s})=>{const e=E();return se(e,"1825130190")?t.jsxs("div",{className:"flex flex-col",children:[t.jsx("div",{className:"mb-2",children:t.jsx(st,{children:t.jsx(j,{id:"gizmo.about.ratingsHeader",defaultMessage:"Ratings"})})}),s!=null?[5,4,3,2,1].map(o=>t.jsxs("div",{className:"flex flex-row items-center gap-2 py-1 text-xl font-semibold",children:[t.jsxs("div",{className:"icon-lg relative",children:[t.jsx(ps,{className:"icon-lg text-green-500"}),t.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-[11px] text-white",children:o})]}),t.jsx("div",{className:"h-2.5 grow overflow-hidden rounded-full bg-gray-100 dark:bg-gray-700",children:t.jsx("div",{className:"h-full bg-green-500",style:{width:`${(s?.by_rating[o-1]??0)*100}%`}})})]},o)):t.jsx("div",{className:"text-token-text-tertiary text-sm",children:t.jsx(j,{id:"gizmo.about.ratings.notEnoughRatings",defaultMessage:"Not enough ratings yet"})})]}):null},Pi=({gizmoId:s,creatorId:e})=>{const n=xs(ee.GPTDetails),o=()=>X.closeModal(ee.GPTDetails);return n?t.jsx(Gi,{gizmoId:s,creatorId:e,onClose:o}):null},Gi=({gizmoId:s,creatorId:e,onClose:n,children:o})=>{const i=Ct(s),a=Si(s),l=yi(e);return _.useEffect(()=>{B.logEvent("Detail Show Modal",{gizmo_id:s})},[s]),t.jsx(Qe,{testId:"modal-gizmo-about",isOpen:!0,onClose:n,type:"success",hideSeparator:!0,showCloseButton:!0,noPadding:!0,className:"flex h-[calc(100vh-25rem)] min-h-[40vh] max-w-xl flex-col",children:t.jsx(Fi,{aboutQuery:a,gizmoQuery:i,creatorSliceQuery:l,onClose:n,children:o})})},Fi=({aboutQuery:s,gizmoQuery:e,creatorSliceQuery:n,children:o,onClose:i})=>{const a=H();if(s.isLoading||e.isLoading||n.isLoading)return t.jsx("div",{className:"flex h-40 items-center justify-center pb-10",children:t.jsx(Cs,{})});const l=s.data?.gizmo,r=n?.data,c=e?.data;if(!l||s.error||e.error||n.error||s.data==null||e.data==null||n.data==null||!c){const d=Nt(s.error??e.error??n.error)??a.formatMessage({id:"I3v3Oj",defaultMessage:"An error occurred loading this GPT."});return t.jsx("div",{className:"relative flex flex-col gap-2 overflow-hidden px-2 py-4",children:t.jsx("div",{className:"flex flex-col p-4 text-red-500",children:d})})}return t.jsx("div",{className:"flex h-full px-2 py-4",children:t.jsxs("div",{className:"relative flex grow flex-col gap-4 overflow-y-auto px-8 pt-16 pb-20",children:[t.jsx("div",{className:"absolute top-0",children:t.jsxs("div",{className:"from-token-main-surface-primary fixed start-4 end-4 z-10 flex items-center justify-end bg-linear-to-b to-transparent pb-2",children:[c&&t.jsx(_i,{gizmoResource:c}),t.jsx(Jo,{onClick:i})]})}),t.jsx("div",{className:"absolute bottom-[64px]",children:t.jsx("div",{className:"from-token-main-surface-primary fixed start-4 end-4 z-10 flex min-h-[64px] items-end bg-linear-to-t to-transparent px-2",children:o})}),t.jsx(Gs,{gizmo:c,className:"h-fit!",avatarClassName:"h-20! w-20!"}),t.jsx(Ii,{blocks:s.data.about_blocks}),t.jsx(ki,{gizmo:c,onClose:i}),t.jsx(Mi,{tools:c.tools}),t.jsx(zi,{reviewStats:s.data.review_stats}),r&&t.jsx(Ei,{gizmos:r.items})]})})};function Ei({gizmos:s}){const e=E();return s.length===0?null:t.jsxs("div",{className:"flex flex-col",children:[t.jsx("div",{className:"mb-2",children:t.jsx(st,{children:t.jsx(j,{id:"gizmo.about.moreByHeader",defaultMessage:"More by {creatorName}",values:{creatorName:s[0].gizmo.author.display_name}})})}),t.jsx("div",{className:U("no-scrollbar group flex min-h-[104px] items-center space-x-2 overflow-x-auto overflow-y-hidden"),children:s?.map(n=>t.jsx("a",{onClick:()=>{B.logEvent("Detail Click Gizmo",{gizmo_id:n.gizmo.id})},href:Ve(e,n),className:"bg-token-main-surface-secondary h-fit min-w-fit rounded-xl px-1 py-4 md:px-3 md:py-4 lg:px-3",children:t.jsx(kn,{resource:n})},n.gizmo.id))})]})}const lr=s=>t.jsx("div",{className:"flex grow flex-col items-center",children:t.jsxs(re,{color:"primary",className:"h-12 w-full",icon:wt,...s,children:[t.jsx(j,{id:"gizmo.about.startChat",defaultMessage:"Start Chat"}),s.children]})}),Q=St({browsing:{id:"gizmo.about.tools.browsing",defaultMessage:"Browsing"},search:{id:"gizmo.about.tools.search",defaultMessage:"Web Search"},dataAnalysis:{id:"gizmo.about.tools.dataAnalysis",defaultMessage:"Code Interpreter & Data Analysis"},dalle:{id:"gizmo.about.tools.dalle",defaultMessage:"DALLÂ·E Images"},imageGen:{id:"gizmo.about.tools.imageGen",defaultMessage:"4o Image Generation"},memory:{id:"gizmo.about.tools.memory",defaultMessage:"Memory"},actions:{id:"gizmo.about.tools.actions",defaultMessage:"Actions"},actionsDescription:{id:"gizmo.about.tools.actionsDescription",defaultMessage:"Retrieves or takes actions outside of ChatGPT"},memoryDescription:{id:"gizmo.about.tools.memoryDescription",defaultMessage:"Learns from previous chats to improve future conversations"}});function Di(s,e,n){const{data:o}=It(),a=ea(s).id,{modelLabel:l}=_a(a,o),r=zn(),c=wa(s,r,void 0,e,n);return{modelLabel:l,dropdownSections:c}}function Ai({show:s,clientThreadId:e,gizmoHasCustomActions:n,preferredModelId:o}){const{modelLabel:i,dropdownSections:a}=Di(e,n,o);return s?t.jsxs(S.Sub,{onOpenChange:l=>{l&&B.logEvent("GPTs: Breadcrumb Picker Model Picker Open")},children:[t.jsx(S.SubMenuTrigger,{children:t.jsxs("div",{className:"flex w-full items-center justify-between gap-1",children:[t.jsx(j,{id:"ilkdMh",defaultMessage:"Model"}),t.jsx("span",{className:"text-token-text-secondary text-xs font-medium",children:i})]})}),t.jsx(S.Portal,{children:t.jsx(S.SubContent,{onClick:()=>{B.logEvent("GPTs: Breadcrumb Picker Model Picker Select")},children:t.jsx(Ma,{sections:a})})})]}):null}const Oi=ze(()=>Pe(()=>import("./k8bi9d63xvcw374i.js"),__vite__mapDeps([5,1,2,3,6,7])).then(s=>s.GizmoKeepInSidebarMenuItem));function Li({children:s,clientThreadId:e,gizmoResource:n,showReportModal:o,inMobileHeader:i,showGizmoModelPicker:a}){return t.jsxs(t.Fragment,{children:[t.jsx(Ge,{contentAlign:i?"center":"start",size:"small",triggerButton:s,children:t.jsx(Fs,{clientThreadId:e,gizmoResource:n,showReportModal:o,showGizmoModelPicker:a})}),t.jsx(Ri,{gizmoResource:n})]})}function Ri({gizmoResource:s}){const e=xs(ee.GPTRemoveThirdParty),n=ws(),o=js(s);return t.jsxs(t.Fragment,{children:[t.jsx(Pi,{gizmoId:s.gizmo.id,creatorId:s.gizmo.author.user_id}),t.jsx(Bn,{gizmo:s}),o&&t.jsx(Hn,{gizmo:s}),o&&t.jsx($n,{gizmo:s}),t.jsx(qn,{gpt:s,isOpen:e,onClose:()=>X.closeModal(ee.GPTRemoveThirdParty),account:n})]})}function Fs({clientThreadId:s,gizmoResource:e,showReportModal:n,showGizmoModelPicker:o}){const{canEdit:i}=Pn(e),{canCreate:a}=Gn(),{canViewConfig:l}=Fn(e),r=En(e.gizmo.id),c=Gt(),d=Dn(e),m=e.gizmo.share_recipient===Wt.Marketplace||e.gizmo.share_recipient===Wt.Link,u=!d&&m,x=E(),h=se(x,"1825130190"),g=se(x,"3645668434"),b=h&&!d&&js(e),v=c?.includes(Ne.GizmoSupportEmails)&&!d&&e.gizmo.author.will_receive_support_emails&&b,f=ta(),p=kt(s),C=vs(Ne.WorkspaceShareLinks),{isUnauthenticated:M}=tt(),w=C&&p&&!M,I=ne();return t.jsxs(t.Fragment,{children:[t.jsx(Ai,{show:o,clientThreadId:s,gizmoHasCustomActions:An(e.tools),preferredModelId:e.gizmo.default_model??void 0}),t.jsx(S.Item,{onClick:()=>{B.logNewChatButtonClicked({location:"Gizmo information dropdown",gizmo_id:e.gizmo.id}),Ss(I,`/g/${e.gizmo.short_url}`)},icon:bs,children:t.jsx(j,{...q.newChat})}),t.jsx(S.Item,{onClick:()=>X.openModal(ee.GPTDetails),icon:sa,children:t.jsx(j,{...q.about})}),e.tools?.find(k=>k.type===ie.JIT_PLUGIN)&&t.jsx(S.Item,{onClick:()=>X.openModal(ee.GPTPrivacySettings),icon:na,children:t.jsx(j,{...q.privacySettings})}),i&&t.jsx(S.Item,{onClick:()=>{I(r)},icon:ks,children:t.jsx(j,{...q.customize})}),!i&&l&&g&&t.jsxs(t.Fragment,{children:[t.jsx(S.Item,{onClick:async()=>{I(`/g/${e.gizmo.id}/view`)},icon:On,children:t.jsx(j,{id:"GizmoInformation.viewGizmoLabel",defaultMessage:"View configuration"})}),a&&t.jsx(S.Item,{onClick:async()=>{const k=await ke.copyGizmo({gizmoId:e.gizmo.id});k.gizmo.id&&I(`/gpts/editor/${k.gizmo.id}`)},icon:Ln,children:t.jsx(j,{id:"GizmoInformation.copyGizmoLabel",defaultMessage:"Duplicate GPT"})})]}),t.jsx(Oi,{gizmoResource:e,location:"conversation_page"}),t.jsx(hs,{gizmoResource:e}),v&&t.jsx(S.Item,{onClick:()=>X.openModal(ee.GPTFeedbackEmail),icon:wt,children:t.jsx(j,{...q.feedbackEmail})}),b&&t.jsx(S.Item,{onClick:()=>X.openModal(ee.GPTReview),icon:Rn,children:t.jsx(j,{...q.reviewGPT})}),u&&t.jsx(S.Item,{onClick:n,icon:ys,children:t.jsx(j,{...q.reportGPT})}),w&&t.jsx(S.Item,{onClick:()=>X.openSharingModal(p),icon:Ke,children:t.jsx(j,{...q.shareChat})}),f&&t.jsxs(t.Fragment,{children:[t.jsx(S.Separator,{}),t.jsx(S.Item,{color:"danger",onClick:()=>X.openModal(ee.GPTRemoveThirdParty),icon:oa,children:t.jsx(j,{defaultMessage:"Remove GPT from workspace",id:"GizmoInformation.removeGPT"})})]}),c?.includes("debug")&&t.jsxs(t.Fragment,{children:[t.jsx(S.Separator,{}),t.jsx(S.Item,{onClick:()=>{I(Un(e))},children:"(Internal) See share page"})]})]})}const Ui=({conversation:s,isActiveConversation:e,inMainScreen:n=!1,inChatWindow:o=!1,inOrla:i=!1})=>{const a=E(),l=s.id,r=s.gizmo_id,c=Ze(r),d=se(a,"3376455464"),m=se(a,"16480203"),u=aa(l),x=vs(Ne.WorkspaceShareLinks),{isUnauthenticated:h}=tt(),g=x&&u&&!h&&(!c||m),b=Wn(),[v,f]=_.useState(!!s.is_do_not_remember),p=H();let C=null;const{snorlaxes:M}=gs();C=M;let w=null;c&&C&&(w=C.find(({gizmo:G})=>G.gizmo.id===r)?.gizmo);const I=ss(),k=vt(),{eligible:N,markAsViewed:$}=Vn(Kn.ArchiveConversationOnboarding),L=Je(),D=ne(),T=async()=>{await Ft.safePatch("/conversation/{conversation_id}",{parameters:{path:{conversation_id:s.id}},requestBody:{is_archived:!0}}),Qn(k,s.gizmo_id),Is.logEvent("chatgpt_conversation_archived"),B.logEvent("Conversation Archived"),N&&(L.info(p.formatMessage({defaultMessage:"You can view archived chats in Settings",id:"HistoryGizmoItem.archiveChatOnboarding"}),{duration:10,hasCloseButton:!0}),$()),e&&Ss(D)},R=[g&&!o&&t.jsx(S.Item,{onClick:()=>X.openSharingModal(u,"History Item Menu"),icon:Ke,"data-testid":"share-chat-menu-item",children:t.jsx(j,{...q.shareChat})},"share"),!1,!o&&!i&&t.jsx(S.Item,{disabled:!u,onClick:()=>{setTimeout(()=>{u&&rs.publish({kind:n?"editTitleInMainScreen":"editTitle",serverThreadId:u})},100)},icon:yt,children:t.jsx(j,{...q.renameChat})},"rename"),b&&C&&C?.length>0&&ia(r)&&u&&t.jsxs(ts.Fragment,{children:[c&&t.jsxs(t.Fragment,{children:[C.length>1&&t.jsxs(S.Sub,{children:[t.jsx(S.SubMenuTrigger,{icon:gt,children:t.jsx(j,{...y.moveConversationToSnorlax})}),t.jsx(S.Portal,{children:t.jsx(S.SubContent,{children:t.jsx(Jt,{inSidebarFlyout:!1,onUpdateConversationGizmo:G=>I({newGizmoId:G,conversation:s,previousGizmoId:r??null}),currentGizmoId:r})})})]}),t.jsx(S.Item,{onClick:()=>{I({newGizmoId:null,conversation:s,previousGizmoId:r??null})},icon:Xn,children:t.jsx("div",{className:"overflow-hidden text-ellipsis whitespace-nowrap",children:t.jsx(j,{...y.removeConversationFromSnorlax,values:{projectName:w?.gizmo.display.name??"project"}})})})]}),!c&&t.jsxs(S.Sub,{children:[t.jsx(S.SubMenuTrigger,{icon:gt,children:p.formatMessage(y.addConversationToSnorlax)}),t.jsx(S.Portal,{children:t.jsx(S.SubContent,{children:t.jsx(Jt,{inSidebarFlyout:!1,onUpdateConversationGizmo:G=>I({newGizmoId:G,conversation:s,previousGizmoId:r??null})})})})]})]},"snorlax")].filter(Boolean);return t.jsxs(t.Fragment,{children:[R,R.length>0&&t.jsx(S.Separator,{}),t.jsx(Zn,{children:({openScheduleModal:G,isScheduled:z,isSchedulable:O})=>O||z?t.jsx(S.Item,{onClick:G,disabled:!u,icon:Yn,children:t.jsx(j,{...z?q.editSchedule:q.scheduleTask})}):null}),t.jsx(S.Item,{disabled:!u,onClick:()=>{u&&T()},icon:Jn,children:t.jsx(j,{...q.archiveChat})}),!1,d&&o&&t.jsx(S.Item,{icon:ys,onClick:()=>{X.openModal(ee.ReportConversation)},children:r?t.jsx(j,{id:"thread.reportConversation",defaultMessage:"Report conversation"}):t.jsx(j,{id:"thread.report",defaultMessage:"Report"})}),t.jsx(S.Item,{color:"danger",disabled:!u,onClick:()=>{u&&et(a,eo,{serverThreadId:u,isActiveConversation:e})},icon:fs,"data-testid":"delete-chat-menu-item",children:t.jsx(j,{...q.deleteChat})})]})};function Es({clientThreadId:s,gizmoId:e,conversationTitle:n,conversationAsyncStatus:o,isDoNotRemember:i}){return{id:s,title:n??"",create_time:null,update_time:null,conversation_template_id:null,async_status:o??null,gizmo_id:e??null,snippet:null,is_do_not_remember:i}}const Ds=({conversation:s,children:e,isActiveConversation:n,onOpenChange:o,inMainScreen:i=!1,inChatWindow:a=!1,inOrla:l=!1,...r})=>{const[c,d]=_.useState(!1);return t.jsx(Ge,{...r,open:c,onOpenChange:m=>{d(m),o?.(m)},side:"bottom",contentAlign:a?"end":"start",alignOffset:a?0:-8,sideOffset:a?0:-4,triggerButton:e,size:"auto",children:c&&t.jsx(Ui,{conversation:s,inMainScreen:i,isActiveConversation:n,inChatWindow:a,inOrla:l})})},q=St({newChat:{defaultMessage:"New chat",id:"GizmoInformation.newChat"},about:{defaultMessage:"About",id:"GizmoInformation.about"},privacySettings:{defaultMessage:"Privacy settings",id:"GizmoInformation.privacySettings"},viewDetails:{defaultMessage:"View details",id:"GizmoInformation.viewDetails"},share:{defaultMessage:"Share",id:"GizmoInformation.share"},favorite:{defaultMessage:"Favorite",id:"GizmoInformation.favorite"},customize:{defaultMessage:"Edit GPT",id:"GizmoInformation.customize"},feedbackEmail:{defaultMessage:"Send feedback",id:"GizmoInformation.feedbackEmail"},reviewGPT:{defaultMessage:"Review GPT",id:"GizmoInformation.reviewGPT"},report:{defaultMessage:"Report",id:"GizmoInformation.report"},reportGPT:{defaultMessage:"Report GPT",id:"GizmoInformation.reportGPT"},privacy:{defaultMessage:"Privacy",id:"GizmoInformation.privacy"},deleteChat:{defaultMessage:"Delete",id:"GizmoInformation.deleteChat.0"},debugChat:{defaultMessage:"(Internal) Debug",id:"GizmoInformation.debugChat"},renameChat:{defaultMessage:"Rename",id:"GizmoInformation.renameChat"},scheduleTask:{id:"7e1pG9",defaultMessage:"Schedule"},editSchedule:{id:"qzM4nO",defaultMessage:"Edit schedule"},archiveChat:{defaultMessage:"Archive",id:"GizmoInformation.archiveChat.0"},shareChat:{defaultMessage:"Share",id:"GizmoInformation.shareChat"},shareChatLong:{defaultMessage:"Share chat",id:"GizmoInformation.shareChatLong"}}),cr=Object.freeze(Object.defineProperty({__proto__:null,GizmoConversationOptionsDropdown:Ds,GizmoInformationDropdown:Li,GizmoInformationDropdownItems:Fs,buildConversationResponse:Es},Symbol.toStringTag,{value:"Module"})),Fe=ra(la(()=>({feedItems:[],hasUnreadNotifications:!1,isModalOpen:!1}))),Bi=Fe.getState,mt=Fe.setState,Hi={getHasUnreadNotifications:(s=Bi())=>s.hasUnreadNotifications},ye={setIsModalOpen:s=>{mt({isModalOpen:s})},setHasUnreadNotifications:s=>{mt({hasUnreadNotifications:s})},bulkLoadFeedItems:s=>{mt(e=>{e.feedItems=s})}};function $i(){const s=Rt(),e=Fe(Hi.getHasUnreadNotifications);return s&&e}function As(s,e,n,o){const i=E(),a=$i(),l=Tt(()=>{const r=oo(i);return Array.from(r).some(c=>c.asyncStatus$()?.value===ha.UNREAD)});return n&&a||o&&l?s:e}function Rt(){const s=E();return Et(s,"3606233934",{disableExposureLog:!0}).get("enable_notifications_feed")}function dr(){const s=Rt(),e=Fe(n=>n.isModalOpen);return s&&e}function qi(){const s=Rt(),e=bt({queryKey:["fetch-notifications-feed"],queryFn:async()=>{const n=await Ft.safeGet("/notifications/feed");return ye.bulkLoadFeedItems(n.items),ye.setHasUnreadNotifications(n.has_unreads),n.items},enabled:s});return{isLoading:e.isLoading,isFetching:e.isFetching}}function ur(){const s=H(),e=As(io,ao,!0,!1),n=s.formatMessage({id:"1UHY6w",defaultMessage:"Notifications"});return qi(),t.jsx(le,{label:n,className:"group",children:t.jsx(Ye,{icon:e,onClick:()=>ye.setIsModalOpen(!0),"aria-label":n})})}function Wi({item:s,onClose:e}){const o={announcement:so}[s.type];let i=null;try{const d=new Date(s.created_at);i=no({date:d})}catch{}const{clientThreadId:a}=Dt(),l=Ia(a),r=ne(),c=d=>{if(s.action?.type==="show_conversation")e(),r(s.action.conversation_id);else if(s.action?.type==="new_conversation"){const m=s.action;m.prefilled_message&&(l({sourceEvent:d,promptMessage:xa(m.prefilled_message),requestedModelId:m.model_slug??void 0}),e())}};return t.jsxs("button",{className:"border-token-border-default flex w-full items-center justify-start gap-3 overflow-hidden border-t py-4 first-of-type:border-none",onClick:c,disabled:!s.action,children:[t.jsx("div",{className:"relative",children:o&&t.jsx(o,{className:"icon"})}),t.jsxs("div",{className:"flex h-5 shrink grow basis-0 items-center justify-between",children:[t.jsx("div",{className:"text-token-text-primary text-sm leading-tight font-normal",children:s.message}),t.jsx("div",{className:"flex items-center justify-start gap-1",children:t.jsx("div",{className:"text-token-text-tertiary text-sm leading-tight font-normal",children:i??""})})]})]})}function mr(){const{feedItems:s,isModalOpen:e}=Fe();_.useEffect(()=>{e&&(ye.setHasUnreadNotifications(!1),Ft.safePost("/notifications/feed/read",{authOption:ca.SendIfAvailable}))},[e]);const n=H(),o=ne(),i=E(),a=se(i,"3325813340"),l=new Date,r=da(s,d=>{const m=new Date(d.created_at);if(ua(m))return"today";const u=ma(l,m);return u<=7?"last_7_days":u<=30?"last_30_days":"more_than_30_days"}),c=d=>{switch(d){case"today":return n.formatMessage({id:"zlkA39",defaultMessage:"Today"});case"last_7_days":return n.formatMessage({id:"FW89A4",defaultMessage:"Last 7 days"});case"last_30_days":return n.formatMessage({id:"2s3h/P",defaultMessage:"Last 30 days"});case"more_than_30_days":return n.formatMessage({id:"yArZiR",defaultMessage:"More than 30 days"})}};return t.jsx(Qe,{testId:"modal-notifications-feed",isOpen:e,onClose:()=>{ye.setIsModalOpen(!1)},type:"success",size:"custom",className:"max-w-3xl",children:t.jsxs("div",{className:"flex flex-col gap-y-10",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h2",{className:"text-2xl font-bold",children:n.formatMessage({id:"kWt8Cx",defaultMessage:"Notifications"})}),a&&t.jsx(to,{icon:t.jsx(ks,{className:"icon"}),onClick:()=>{o(fa(ga.Notifications))},label:n.formatMessage({id:"mZVh0S",defaultMessage:"Notifications settings"})})]}),Object.entries(r).map(([d,m])=>t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold",children:c(d)}),m.map(u=>t.jsx(Wi,{item:u,onClose:()=>ye.setIsModalOpen(!1)},u.id))]},d))]})})}function fr({showShareButton:s,showProfileDropdown:e,clientThreadId:n}){const o=E(),i=go(o,n),a=kt(n),l=H(),r=Et(o,"1547743984"),[c,d,m,u,x]=Ms(n,N=>[Xt.hasUserMessage(N),Xt.getGizmoId(N),_o(N),N?.title,N?.is_do_not_remember]),h=Tt(()=>i.asyncStatus$()?.value),g=_.useMemo(()=>Es({clientThreadId:n,gizmoId:d,conversationTitle:u,conversationAsyncStatus:h,isDoNotRemember:x}),[n,d,u,h,x]),b=pa(n),{prefetchSearchPromises:v}=Dt(),f=v!=null,p=r.get("show_share_button_text",!1),C=l.formatMessage({id:"GizmoInformation.shareChat",defaultMessage:"Share"}),M=()=>X.openSharingModal(a),w=Ze(d),I=Gt();ja();const{isUnauthenticated:k}=tt();return t.jsxs(t.Fragment,{children:[pt(o)?t.jsx(xo,{}):null,pt(o)&&I?.includes("caterpillar")&&t.jsx(ho,{}),null,s&&a&&t.jsx(t.Fragment,{children:p?t.jsx(re,{onClick:M,icon:Ke,label:C,"data-testid":"share-chat-button",color:"ghost",className:"text-token-text-primary",style:{viewTransitionName:"var(--vt_share_chat_wide_button)"},children:C}):t.jsx(le,{label:l.formatMessage({id:"CPEfES",defaultMessage:"Share chat"}),children:t.jsx(Ye,{"data-testid":"share-chat-button",onClick:M,icon:Ke,style:{viewTransitionName:"var(--vt_share_chat_compact_button)"}})})}),t.jsxs("div",{className:"flex items-center",children:[!k&&!d&&b&&!f&&!c&&t.jsx(t.Fragment,{children:t.jsx(po,{clientThreadId:n})}),t.jsx(jo,{}),a!=null&&!k?t.jsx(Ds,{conversation:g,inMainScreen:!0,isActiveConversation:!0,inChatWindow:!0,children:t.jsx(vo,{"aria-label":l.formatMessage({id:"9Mk/E3",defaultMessage:"Open conversation options"}),"data-testid":"conversation-options-button"})}):d&&w?t.jsx(t.Fragment,{children:t.jsx(bo,{gizmoId:d})}):null,e&&t.jsx(Vi,{clientThreadId:n})]})]})}const Vi=({clientThreadId:s})=>{const e=E();return Vt.markStart("LoginOrProfileMenu"),Vt.markRendered("LoginOrProfileMenu"),t.jsxs(t.Fragment,{children:[!pt(e)&&t.jsx(Zi,{}),t.jsx(So,{clientThreadId:s})]})};function Ki({onClick:s,className:e,testId:n}){const i=H().formatMessage({id:"OFyxqj",defaultMessage:"New chat"});return t.jsx(le,{label:i,className:U("flex",e),children:t.jsx(Ye,{onClick:a=>uo(a,s),icon:bs,"aria-label":i,"data-testid":n,as:"link"})})}function gr({clientThreadId:s,hideNewChat:e=!1}){const n=ro({clientThreadId:s,location:"Navigation actions"});return lo()?t.jsxs("div",{className:"flex items-center",children:[t.jsx(Xi,{}),!e&&t.jsx(Ki,{onClick:n})]}):null}function Xi(){const s=H(),e=co(),{isUnauthenticated:n}=tt(),o=As(fo,mo,!1,!0);return n||e?null:t.jsx(le,{label:s.formatMessage({id:"cElEQV",defaultMessage:"Open sidebar"}),className:"flex",children:t.jsx(Ye,{"aria-label":s.formatMessage({id:"pV/Etp",defaultMessage:"Open sidebar"}),onClick:()=>{X.setSidebarOpen(!0)},icon:o})})}function Zi(){const s=E(),e=yo(),n=Co(),o=Mo(Yi.signUpCta),a=Et(s,"3637408529").get("is_desktop_primary_auth_button_on_right",!1),l=()=>{e({authType:"login",callback:u=>{B.logLogInButtonClicked({location:"Chat header",provider:u})}})},r=()=>{e({authType:"signup",callback:u=>{B.logSignUpButtonClicked({location:"Chat header",provider:u})}})},c=t.jsx(re,{onClick:l,color:n?"primary":"secondary","data-testid":"login-button",className:U(!n&&"screen-arch:hidden md:screen-arch:flex"),children:t.jsx(j,{id:"B1SN7b",defaultMessage:"Log in"})},"login"),d=t.jsx(re,{color:n?"secondary":"primary",onClick:r,"data-testid":"signup-button",className:U(n&&"screen-arch:hidden md:screen-arch:flex"),children:t.jsx(j,{...o})},"signup"),m=n?[c,d]:[d,c];return t.jsx("div",{className:"flex items-center justify-center gap-2",children:a?m.reverse():m})}const Yi=St({signUpCta:{id:"P6cySK",defaultMessage:"Sign up"}});export{fr as C,Xi as E,Gi as G,Vi as L,gr as N,Jt as S,lr as a,mr as b,Gs as c,As as d,ir as e,Ot as f,Rt as g,ur as h,Ki as i,rr as j,Di as k,Zi as l,cr as m,dr as u};
//# sourceMappingURL=n0kwaugzg5mjzz0f.js.map
